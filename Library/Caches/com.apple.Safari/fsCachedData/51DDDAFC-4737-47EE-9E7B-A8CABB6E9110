mw.loader.implement("ext.centralNotice.bannerController",function($,jQuery){});mw.loader.implement("ext.centralNotice.bannerHistoryLogger",function($,jQuery){(function($,mw){var cn=mw.centralNotice,bhLogger,mixin=new cn.Mixin('bannerHistoryLogger'),doNotTrackEnabled=/1|yes/.test(navigator.doNotTrack),waitLogNoSendBeacon,now=Math.round((new Date()).getTime()/1000),log,readyToLogDeferredObj=$.Deferred(),logSent=!1,inSample,BANNER_HISTORY_KV_STORE_KEY='banner_history',BANNER_HISTORY_LOG_ENTRY_VERSION=1,EVENT_LOGGING_SCHEMA='CentralNoticeBannerHistory',TIMESTAMP_RANDOM_SHIFT_MAX=60;function loadLog(){log=cn.kvStore.getItem(BANNER_HISTORY_KV_STORE_KEY,cn.kvStore.contexts.GLOBAL);if(!log){log=[];}}function makeLogEntry(){var data=cn.data,randomTimeShift=Math.round(Math.random()*TIMESTAMP_RANDOM_SHIFT_MAX)-(TIMESTAMP_RANDOM_SHIFT_MAX/2),time=now+randomTimeShift,logEntry={version:BANNER_HISTORY_LOG_ENTRY_VERSION,language:data.uselang,country:data.country,isAnon:data.anonymous,campaign:data.campaign,campaignCategory:data.campaignCategory,bucket:data.bucket,time:time,
status:data.status,statusCode:data.statusCode,bannersNotGuaranteedToDisplay:data.bannersNotGuaranteedToDisplay?!0:false};if(data.banner){logEntry.banner=data.banner;}if(data.bannerCanceledReason){logEntry.bannerCanceledReason=data.bannerCanceledReason;}if(data.bannerLoadedButHiddenReason){logEntry.bannerLoadedButHiddenReason=data.bannerLoadedButHiddenReason;}return logEntry;}function purgeOldLogEntries(maxEntryAge,maxEntries){var i=0,cutoff=now-maxEntryAge*86400;if(log.length>maxEntries){log=log.slice(0-maxEntries);}while(i<log.length&&log[i].time<cutoff){i++;}log=log.slice(i);}function storeLog(){cn.kvStore.setItem(BANNER_HISTORY_KV_STORE_KEY,log,cn.kvStore.contexts.GLOBAL);}function makeEventLoggingData(rate){var elData={},kvError=cn.kvStore.getError(),i,logEntry,elLogEntry;if(rate){elData.r=rate;}elData.i=bhLogger.id;if(kvError){elData.e=kvError.message;return elData;}elData.n=log.length;elData.l=[];i=log.length-1;while(i>=0){logEntry=log[i];elLogEntry={t:logEntry.time,s:logEntry.
statusCode};if(logEntry.banner){elLogEntry.b=logEntry.banner;}else{elLogEntry.c=logEntry.campaign;}elData.l.unshift(elLogEntry);if(!checkEventLoggingURLSize(elData)){elData.l.shift();break;}i--;}return elData;}function sendLog(elData){var deferred=$.Deferred(),elPromise;if(navigator.sendBeacon){elPromise=mw.eventLog.logEvent(EVENT_LOGGING_SCHEMA,elData);}else{setTimeout(function(){deferred.reject();},waitLogNoSendBeacon);elPromise=$.ajax({url:makeEventLoggingURL(elData),timeout:waitLogNoSendBeacon,method:'POST'});}elPromise.then(function(){deferred.resolve();},function(){deferred.reject();});return deferred.promise();}function checkEventLoggingURLSize(elData){return(makeEventLoggingURL(elData).length<=mw.eventLog.maxUrlSize);}function makeEventLoggingURL(elData){return mw.eventLog.makeBeaconUrl({event:elData,revision:13447710,schema:EVENT_LOGGING_SCHEMA,webHost:location.hostname,wiki:mw.config.get('wgDBname')});}mixin.setPostBannerHandler(function(mixinParams){waitLogNoSendBeacon=
mixinParams.waitLogNoSendBeacon;cn.doIdleWork(function(){if(!cn.kvStore.isAvailable()){cn.kvStore.setNotAvailableError();}else{loadLog();if(!doNotTrackEnabled){log.push(makeLogEntry());}purgeOldLogEntries(mixinParams.maxEntryAge,mixinParams.maxEntries);storeLog();}if(doNotTrackEnabled){return;}mw.loader.using(['ext.eventLogging','mediawiki.util','mediawiki.user','schema.'+EVENT_LOGGING_SCHEMA]).done(function(){bhLogger.id=mw.user.generateRandomSessionId();var rateParam=mw.util.getParamValue('bannerHistoryLogRate'),rate=rateParam!==null?parseFloat(rateParam):mixinParams.rate;if(Math.random()<rate){sendLog(makeEventLoggingData(rate)).always(function(){inSample=!0;logSent=!0;readyToLogDeferredObj.resolve();});}else{readyToLogDeferredObj.resolve();}});});});cn.registerCampaignMixin(mixin);cn.bannerHistoryLogger=bhLogger={id:null,ensureLogSent:function(){var deferred=$.Deferred();if(doNotTrackEnabled){deferred.resolve();return deferred.promise();}readyToLogDeferredObj.done(function(){if
(logSent){deferred.resolve();}else{sendLog(makeEventLoggingData()).then(function(){deferred.resolve();},function(){deferred.reject();});}});return deferred.promise();}};})(jQuery,mediaWiki);});mw.loader.implement("ext.centralNotice.choiceData",function($,jQuery){mw.centralNotice.choiceData=[{"name":"C15_enWW_dsk_lw_FR","start":1423764000,"end":1451606400,"preferred":1,"throttle":20,"bucket_count":2,"geotargeted":!0,"banners":[{"name":"B1516_0707_enWW_dsk_lw_sm_rec_check","bucket":1,"weight":25,"category":"fundraising","display_anon":!0,"display_account":!1,"devices":["desktop"]},{"name":"B1516_0707_enWW_dsk_lw_sm_rec_radio","bucket":0,"weight":25,"category":"fundraising","display_anon":!0,"display_account":!1,"devices":["desktop"]}],"countries":["AT","BE","DK","ES","HK","HU","IT","JP","LU","LV","MY","NL","NO","PT","SE","UA","ZA"],"mixins":{"legacySupport":{"bannersNotGuaranteedToDisplay":!0,"setSRISampleRate":!0,"sriSampleRate":1}}},{"name":"C15_enWW_mob_lw_FR","start":1426809600,"end":1451606400,"preferred":1,"throttle":20,"bucket_count":2,"geotargeted":!0,"banners":[{"name":"B1516_0708_enWW_mob_lw_sm_rec_y","bucket":1,"weight":25,"category":"fundraising",
"display_anon":!0,"display_account":!1,"devices":["android","iphone"]},{"name":"B1516_0708_enWW_mob_lw_sm_rec_n","bucket":0,"weight":25,"category":"fundraising","display_anon":!0,"display_account":!1,"devices":["android","iphone"]}],"countries":["AT","BE","DK","ES","HK","HU","IT","JP","LU","LV","MY","NL","NO","RO","SE","SK","UA"],"mixins":{"legacySupport":{"bannersNotGuaranteedToDisplay":!0,"setSRISampleRate":!0,"sriSampleRate":1}}},{"name":"C15_enWW_ipd_lw_FR","start":1430092800,"end":1451606400,"preferred":1,"throttle":20,"bucket_count":2,"geotargeted":!0,"banners":[{"name":"B1516_0708_enWW_ipd_lw_sm_rec_y","bucket":1,"weight":25,"category":"fundraising","display_anon":!0,"display_account":!1,"devices":["ipad"]},{"name":"B1516_0708_enWW_ipd_lw_sm_rec_n","bucket":0,"weight":25,"category":"fundraising","display_anon":!0,"display_account":!1,"devices":["ipad"]}],"countries":["AT","BE","DK","ES","HK","HU","IT","JP","LU","LV","MY","NL","NO","PT","RO","SE","SK",
"UA"],"mixins":{"legacySupport":{"bannersNotGuaranteedToDisplay":!0,"setSRISampleRate":!0,"sriSampleRate":1},"bannerHistoryLogger":{"maxEntries":30,"maxEntryAge":20,"rate":0.01,"waitLogNoSendBeacon":200}}},{"name":"C1516_enIT_dsk_hi_FR","start":1444032000,"end":1446451200,"preferred":3,"throttle":100,"bucket_count":4,"geotargeted":!0,"banners":[{"name":"B1516_1019_enIT_dsk_p2_sm_nag_txt_knowl","bucket":3,"weight":25,"category":"fundraising","display_anon":!0,"display_account":!1,"devices":["desktop"]},{"name":"B1516_1019_enIT_dsk_p2_sm_nag_txt_cntrl","bucket":2,"weight":25,"category":"fundraising","display_anon":!0,"display_account":!1,"devices":["desktop"]},{"name":"B1516_1019_enIT_dsk_p1_lg_ppl_txt_you","bucket":0,"weight":25,"category":"fundraising","display_anon":!0,"display_account":!1,"devices":["desktop"]},{"name":"B1516_1019_enIT_dsk_p1_lg_ppl_txt_now","bucket":1,"weight":25,"category":"fundraising","display_anon":!0,"display_account":!1,"devices":[
"desktop"]}],"countries":["IT"],"mixins":{"legacySupport":{"bannersNotGuaranteedToDisplay":!0,"setSRISampleRate":!0,"sriSampleRate":1}}},{"name":"WLAfrica 2015","start":1443650400,"end":1448920740,"preferred":1,"throttle":100,"bucket_count":1,"geotargeted":!0,"banners":[{"name":"WLAfrica2015","bucket":0,"weight":25,"category":"WLAfrica2015","display_anon":!0,"display_account":!0,"devices":["android","desktop","ipad","iphone","unknown"]}],"countries":["AC","AO","BF","BI","BJ","BW","CD","CF","CG","CI","CM","CV","DJ","DZ","EA","EG","EH","ER","ET","GA","GH","GM","GN","GQ","GW","KE","KM","LR","LS","LY","MA","MG","ML","MR","MU","MW","MZ","NA","NE","NG","RE","RW","SC","SD","SH","SL","SN","SO","SS","ST","SZ","TA","TD","TG","TN","TZ","UG","YT","ZA","ZM","ZW"],"mixins":[]},{"name":"ESPC 2015 UA","start":1443646800,"end":1446328740,"preferred":1,"throttle":100,"bucket_count":1,"geotargeted":!0,"banners":[{"name":"ESPC_2015_UA","bucket":0,"weight":25,"category":"ESPC2015UA",
"display_anon":!0,"display_account":!0,"devices":["android","desktop","ipad","iphone","unknown"]}],"countries":["UA"],"mixins":[]},{"name":"WLAfrica 2015 FR","start":1443650400,"end":1448920740,"preferred":1,"throttle":100,"bucket_count":1,"geotargeted":!0,"banners":[{"name":"WLAfricaFR2015","bucket":0,"weight":100,"category":"WLAfrica2015FR","display_anon":!0,"display_account":!0,"devices":["android","desktop","ipad","iphone","unknown"]}],"countries":["FR"],"mixins":[]},{"name":"TWL_2015","start":1444111200,"end":1445320800,"preferred":1,"throttle":50,"bucket_count":1,"geotargeted":!1,"banners":[{"name":"twl_2015","bucket":0,"weight":25,"category":"TWL_2015","display_anon":!1,"display_account":!0,"devices":["desktop"]}],"mixins":{"legacySupport":{"bannersNotGuaranteedToDisplay":!0,"setSRISampleRate":!0,"sriSampleRate":1}}},{"name":"C1516_enIT_mob_FR","start":1444672800,"end":1446487200,"preferred":3,"throttle":100,"bucket_count":4,"geotargeted":!0,"banners":[{
"name":"B1516_1019_enIT_mob_p2_sm_txt_cntl_mob","bucket":2,"weight":25,"category":"fundraising","display_anon":!0,"display_account":!1,"devices":["android","iphone"]},{"name":"B1516_1019_enIT_mob_p2_sm_txt_best_dsk","bucket":3,"weight":25,"category":"fundraising","display_anon":!0,"display_account":!1,"devices":["android","iphone"]},{"name":"B1516_1019_enIT_mob_p1_lg_txt_cntl_mob","bucket":0,"weight":25,"category":"fundraising","display_anon":!0,"display_account":!1,"devices":["android","iphone"]},{"name":"B1516_1019_enIT_mob_p1_lg_txt_best_dsk","bucket":1,"weight":25,"category":"fundraising","display_anon":!0,"display_account":!1,"devices":["android","iphone"]}],"countries":["IT"],"mixins":{"legacySupport":{"bannersNotGuaranteedToDisplay":!0,"setSRISampleRate":!0,"sriSampleRate":1}}},{"name":"C1516_enIT_ipd_FR","start":1444672800,"end":1446487200,"preferred":3,"throttle":100,"bucket_count":4,"geotargeted":!0,"banners":[{"name":
"B1516_101307_itenIT_ipd_p2_sm_img_non","bucket":3,"weight":25,"category":"fundraising","display_anon":!0,"display_account":!1,"devices":["ipad"]},{"name":"B1516_101307_itenIT_ipd_p2_sm_img_ppl","bucket":2,"weight":25,"category":"fundraising","display_anon":!0,"display_account":!1,"devices":["ipad"]},{"name":"B1516_101307_itenIT_ipd_p1_lg_img_non","bucket":1,"weight":25,"category":"fundraising","display_anon":!0,"display_account":!1,"devices":["ipad"]},{"name":"B1516_101307_itenIT_ipd_p1_lg_img_ppl","bucket":0,"weight":25,"category":"fundraising","display_anon":!0,"display_account":!1,"devices":["ipad"]}],"countries":["IT"],"mixins":{"legacySupport":{"bannersNotGuaranteedToDisplay":!0,"setSRISampleRate":!0,"sriSampleRate":1}}}];});mw.loader.implement("ext.centralNotice.display",function($,jQuery){(function($,mw){var cn,Mixin,campaignMixins={},bannerLoadedDeferredObj;Mixin=function(name){this.name=name;};Mixin.prototype.setPreBannerHandler=function(handlerFunc){this.preBannerHandler=handlerFunc;};Mixin.prototype.setPostBannerHandler=function(handlerFunc){this.postBannerHandler=handlerFunc;};function runMixinHooks(hookPropertyName){var state=cn.internal.state;$.each(state.getCampaign().mixins,function(mixinName,mixinParams){if(!(mixinName in campaignMixins)){mw.log('Mixin '+mixinName+' not registered.');return;}if(!(hookPropertyName in campaignMixins[mixinName])){return;}var handler=campaignMixins[mixinName][hookPropertyName];if(typeof handler!=='function'){mw.log(hookPropertyName+' for '+mixinName+' not a function.');return;}handler(mixinParams);});}function runPreBannerMixinHooks(){runMixinHooks('preBannerHandler');}function runPostBannerMixinHooks(){runMixinHooks('postBannerHandler');}function setUpDataProperty
(){if(typeof Object.defineProperty==='function'){Object.defineProperty(cn,'data',{get:function(){return cn.internal.state.getData();}});}else{cn.data=cn.internal.state.getData();}}function setUpBannerLoadedPromise(){bannerLoadedDeferredObj=$.Deferred();cn.bannerLoadedPromise=bannerLoadedDeferredObj.promise();cn.events={};cn.events.bannerLoaded=cn.bannerLoadedPromise;}function fetchBanner(){var data=cn.internal.state.getData(),url=new mw.Uri(mw.config.get('wgCentralSelectedBannerDispatcher'));url.extend({campaign:data.campaign,banner:data.banner,uselang:data.uselang,debug:data.debug});$.ajax({url:url.toString(),dataType:'script',cache:!0});}function injectBannerHTML(bannerHtml){$('div#centralNotice').attr('class',mw.html.escape('cn-'+cn.internal.state.getData().category)).prepend('<!--googleoff: all-->'+bannerHtml+'<!--googleon: all-->');}function recordImpression(){var state=cn.internal.state,url;if(Math.random()>state.getData().recordImpressionSampleRate){return;}url=new mw.Uri(mw.
config.get('wgCentralBannerRecorder'));url.extend(state.getDataCopy(true));if(navigator.sendBeacon){navigator.sendBeacon(url.toString());}else{setTimeout(function(){document.createElement('img').src=url.toString();},0);}}function reallyChooseAndMaybeDisplay(){var chooser=cn.internal.chooser,bucketer=cn.internal.bucketer,state=cn.internal.state,hide=cn.internal.hide,campaign,banner;state.setUp();setUpDataProperty();campaign=chooser.chooseCampaign(cn.choiceData,state.getData().country,state.getData().anonymous,state.getData().device,state.getData().randomcampaign);if(campaign===null){return;}state.setCampaign(campaign);bucketer.setCampaign(campaign);hide.setCategory(state.getData().campaignCategory);if(cn.kvStore){cn.kvStore.setCampaignName(state.getData().campaign);cn.kvStore.setCategory(state.getData().campaignCategory);}bucketer.process();state.setBucket(bucketer.getBucket());runPreBannerMixinHooks();if(state.isBannerCanceled()){runPostBannerMixinHooks();recordImpression();return;}
hide.processCookie();if(hide.shouldHide()){state.cancelBanner(hide.getReason());runPostBannerMixinHooks();recordImpression();return;}banner=chooser.chooseBanner(campaign,state.getData().bucket,state.getData().anonymous,state.getData().device,state.getData().randombanner);if(!banner){state.setNoBannerAvailable();runPostBannerMixinHooks();recordImpression();return;}state.setBanner(banner);if(cn.kvStore){cn.kvStore.setBannerName(banner.name);}cn.bannerData.bannerName=banner.name;setUpBannerLoadedPromise();fetchBanner();}cn={reallyInsertBanner:function(bannerJson){var state=cn.internal.state,shownAfterLoadingBanner=!0,bannerLoadedButHiddenReason,tmpData;injectBannerHTML(bannerJson.bannerHtml);bannerLoadedDeferredObj.resolve(cn.internal.state.getData());if(state.getData().bannersNotGuaranteedToDisplay){if(typeof cn.bannerData.alterImpressionData==='function'){tmpData=state.getDataCopy();shownAfterLoadingBanner=cn.bannerData.alterImpressionData(tmpData);if(!shownAfterLoadingBanner){
bannerLoadedButHiddenReason=tmpData.reason||'';state.setBannerLoadedButHidden(bannerLoadedButHiddenReason);}if(tmpData.banner_count){state.setBannerCount(tmpData.banner_count);}}else{state.setAlterFunctionMissing();}}if(shownAfterLoadingBanner){state.setBannerShown();}if(!state.getData().testingBanner){runPostBannerMixinHooks();recordImpression();}},internal:{},setBannersNotGuaranteedToDisplay:function(){cn.internal.state.setBannersNotGuaranteedToDisplay();},cancelBanner:function(reason){cn.internal.state.cancelBanner(reason);},setBannerLoadedButHidden:function(reason){cn.internal.state.setBannerLoadedButHidden(reason);},setRecordImpressionSampleRate:function(rate){cn.internal.state.setRecordImpressionSampleRate(rate);},bannerData:{},Mixin:Mixin,registerCampaignMixin:function(mixin){campaignMixins[mixin.name]=mixin;},chooseAndMaybeDisplay:function(){mw.geoIP.getPromise().fail(cn.internal.state.setInvalidGeoData).always(reallyChooseAndMaybeDisplay);},displayTestingBanner:function(){mw.
geoIP.getPromise().fail(cn.internal.state.setInvalidGeoData).always(function(){cn.internal.state.setUpForTestingBanner();setUpDataProperty();setUpBannerLoadedPromise();fetchBanner();});},insertBanner:function(bannerJson){$(function(){cn.reallyInsertBanner(bannerJson);});},hideBannerWithCloseButton:function(){$('#centralNotice').hide();cn.internal.hide.setHideWithCloseButtonCookies();},hideBanner:function(){cn.hideBannerWithCloseButton();},setBucket:function(bucket){cn.internal.bucketer.setBucket(bucket);cn.internal.state.setBucket(bucket);},getDataProperty:function(prop){return cn.internal.state.getData()[prop];}};if(mw.centralNotice===undefined){mw.centralNotice=cn;}else{$.extend(mw.centralNotice,cn);cn=mw.centralNotice;}mw.log.deprecate(window,'insertBanner',cn.insertBanner,'Use mw.centralNotice method instead');mw.log.deprecate(window,'hideBanner',cn.hideBanner,'Use mw.centralNotice method instead');mw.log.deprecate(window,'toggleNotice',cn.hideBanner,
'Use mw.centralNotice method instead');})(jQuery,mediaWiki);(function($,mw){var state,status,UNKNOWN_COUNTRY_CODE='XX',CAMPAIGN_CATEGORY_FOR_MIXED_BANNER_CATEGORIES='mixed_banner_categories',DEVICES={DESKTOP:'desktop',IPHONE:'iphone',IPAD:'ipad',ANDROID:'android',UNKNOWN:'unknown'},STATUSES={CAMPAIGN_NOT_CHOSEN:new Status('campaign_not_chosen',0),CAMPAIGN_CHOSEN:new Status('campaign_chosen',1),BANNER_CANCELED:new Status('banner_canceled',2),NO_BANNER_AVAILABLE:new Status('no_banner_available',3),BANNER_CHOSEN:new Status('banner_chosen',4),BANNER_LOADED_BUT_HIDDEN:new Status('banner_loaded_but_hidden',5),BANNER_SHOWN:new Status('banner_shown',6)},REASONS={'other':0,'close':1,'waitdate':2,'waitimps':3,'waiterr':4,'belowMinEdits':5,'viewLimit':6,'seen-fullscreen':7,'cookies-disabled':8,'donate':9,'cookies':10,'seen':11,'empty':12};function Status(key,code){this.key=key;this.code=code;}function getDeviceCode(){var ua;if(mw.config.get('skin')!=='minerva'){return DEVICES.DESKTOP;}ua=
navigator.userAgent;if(ua.match(/iphone/i)){return DEVICES.IPHONE;}if(ua.match(/ipad/i)){return DEVICES.IPAD;}if(ua.match(/android/i)){return DEVICES.ANDROID;}return DEVICES.UNKNOWN;}function setInitialData(){var urlParams=$.extend(state.urlParams,(new mw.Uri()).query);state.data.anonymous=(mw.config.get('wgUserName')===null);state.data.project=mw.config.get('wgNoticeProject');state.data.db=mw.config.get('wgDBname');state.data.uselang=mw.config.get('wgUserLanguage');state.data.device=urlParams.device||getDeviceCode();state.data.country=urlParams.country||state.data.country||(window.Geo&&window.Geo.country)||UNKNOWN_COUNTRY_CODE;state.data.debug=urlParams.debug!==undefined?true:!1;state.data.randomcampaign=urlParams.randomcampaign!==undefined?urlParams.randomcampaign:Math.random();state.data.randombanner=urlParams.randombanner!==undefined?urlParams.randombanner:Math.random();state.data.recordImpressionSampleRate=urlParams.recordImpressionSampleRate!==undefined?urlParams.
recordImpressionSampleRate:mw.config.get('wgCentralNoticeSampleRate');state.data.getVars=urlParams;}function setTestingBannerData(){state.data.campaign=state.urlParams.campaign;state.data.banner=state.urlParams.banner;state.data.testingBanner=!0;}function setStatus(s,reason){var reasonCodeStr=reason?('.'+state.lookupReasonCode(reason)):'';status=s;state.data.status=s.key;state.data.statusCode=s.code.toString()+reasonCodeStr;}state=mw.centralNotice.internal.state={STATUSES:STATUSES,urlParams:{},data:{},campaign:null,banner:null,setInvalidGeoData:function(){state.data.country=UNKNOWN_COUNTRY_CODE;},setUp:function(){setInitialData();setStatus(STATUSES.CAMPAIGN_NOT_CHOSEN);},setUpForTestingBanner:function(){setInitialData();setTestingBannerData();setStatus(STATUSES.BANNER_CHOSEN);},getData:function(){return state.data;},getDataCopy:function(cleanForURLSerialization){var dataCopy=$.extend(true,{},state.data);if(cleanForURLSerialization){delete dataCopy.getVars;}return dataCopy;},
setCampaign:function(c){var prop,i,category,campaignCategory=null;state.campaign=c;state.data.campaign=state.campaign.name;setStatus(STATUSES.CAMPAIGN_CHOSEN);state.data.mixins={};for(prop in state.campaign.mixins){if(state.campaign.mixins.hasOwnProperty(prop)){state.data.mixins[prop]=!0;}}for(i=0;i<state.campaign.banners.length;i++){category=state.campaign.banners[i].category;if(campaignCategory===null){campaignCategory=category;}else if(campaignCategory!==category){campaignCategory=CAMPAIGN_CATEGORY_FOR_MIXED_BANNER_CATEGORIES;break;}}state.data.campaignCategory=campaignCategory;},getCampaign:function(){return state.campaign;},setBanner:function(b){state.banner=b;state.data.banner=state.banner.name;state.data.bannerCategory=state.banner.category;setStatus(STATUSES.BANNER_CHOSEN);},setBucket:function(bucket){state.data.bucket=bucket;},setBannersNotGuaranteedToDisplay:function(){state.data.bannersNotGuaranteedToDisplay=!0;},cancelBanner:function(reason){state.data.
bannerCanceledReason=reason;setStatus(STATUSES.BANNER_CANCELED,reason);state.data.result='hide';state.data.reason=reason;},isBannerCanceled:function(){return status===STATUSES.BANNER_CANCELED;},setNoBannerAvailable:function(){setStatus(STATUSES.NO_BANNER_AVAILABLE);state.data.result='hide';state.data.reason='empty';},setBannerLoadedButHidden:function(reason){state.data.bannerLoadedButHiddenReason=reason;setStatus(STATUSES.BANNER_LOADED_BUT_HIDDEN,reason);state.data.result='hide';state.data.reason=reason;},setAlterFunctionMissing:function(){state.data.alterFunctionMissing=!0;},setBannerShown:function(){setStatus(STATUSES.BANNER_SHOWN);state.data.result='show';},setBannerCount:function(bannerCount){state.data.banner_count=bannerCount;},setRecordImpressionSampleRate:function(rate){state.data.recordImpressionSampleRate=rate;},lookupReasonCode:function(reasonName){if(reasonName in REASONS){return REASONS[reasonName];}return REASONS.other;}};})(jQuery,mediaWiki);(function($,mw){var cn=mw.
centralNotice,CAMPAIGN_STALENESS_LEEWAY=15;function makeFilteredChoiceData(choiceData,country,anon,device){var i,campaign,j,banner,keepCampaign,filteredChoiceData=[],now=new Date(),campaignEndDatePlusLeeway;for(i=0;i<choiceData.length;i++){campaign=choiceData[i];keepCampaign=!1;campaignEndDatePlusLeeway=new Date();campaignEndDatePlusLeeway.setTime((campaign.end*1000)+(CAMPAIGN_STALENESS_LEEWAY*60000));if(campaignEndDatePlusLeeway<now){return[];}if(campaign.geotargeted&&($.inArray(country,campaign.countries)===-1)){continue;}for(j=0;j<campaign.banners.length;j++){banner=campaign.banners[j];if(anon&&!banner.display_anon){continue;}if(!anon&&!banner.display_account){continue;}if($.inArray(device,banner.devices)===-1){continue;}keepCampaign=!0;break;}if(keepCampaign){filteredChoiceData.push(campaign);}}return filteredChoiceData;}function setCampaignAllocations(filteredChoiceData){var i,campaign,campaignPriority,campaignsByPriority=[],priorities=[],priority,campaignsAtThisPriority,
remainingAllocation=1,j,campaignsAtThisPriorityCount,currentFullAllocation,actualAllocation;if(filteredChoiceData.length===1){filteredChoiceData[0].allocation=filteredChoiceData[0].throttle/100;return;}for(i=0;i<filteredChoiceData.length;i++){campaign=filteredChoiceData[i];campaignPriority=campaign.preferred;if(!campaignsByPriority[campaignPriority]){campaignsByPriority[campaignPriority]=[];}campaignsByPriority[campaignPriority].push(campaign);}for(priority in campaignsByPriority){priorities.push(priority);}priorities.sort();priorities.reverse();for(i=0;i<priorities.length;i++){campaignsAtThisPriority=campaignsByPriority[priorities[i]];if(remainingAllocation<0.01){for(j=0;j<campaignsAtThisPriority.length;j++){campaignsAtThisPriority[j].allocation=0;}continue;}campaignsAtThisPriority.sort(function(a,b){if(a.throttle<b.throttle){return-1;}if(a.throttle>b.throttle){return 1;}return 0;});campaignsAtThisPriorityCount=campaignsAtThisPriority.length;for(j=0;j<campaignsAtThisPriorityCount;j++)
{campaign=campaignsAtThisPriority[j];currentFullAllocation=remainingAllocation/(campaignsAtThisPriorityCount-j);actualAllocation=Math.min(currentFullAllocation,campaign.throttle/100);campaign.allocation=actualAllocation;remainingAllocation-=actualAllocation;}}}function makePossibleBanners(campaign,bucket,anon,device){var i,campaignName,banner,possibleBanners=[];campaignName=campaign.name;for(i=0;i<campaign.banners.length;i++){banner=campaign.banners[i];if(bucket%campaign.bucket_count!==banner.bucket){continue;}if(anon&&!banner.display_anon){continue;}if(!anon&&!banner.display_account){continue;}if($.inArray(device,banner.devices)===-1){continue;}possibleBanners.push(banner);}return possibleBanners;}function setBannerAllocations(possibleBanners){var i,banner,totalWeights=0;if(possibleBanners.length===1){possibleBanners[0].allocation=1;return;}for(i=0;i<possibleBanners.length;i++){totalWeights+=possibleBanners[i].weight;}for(i=0;i<possibleBanners.length;i++){banner=possibleBanners[i];
banner.allocation=banner.weight/totalWeights;}}function chooseObjInAllocatedArray(random,allocatedArray){var blockStart=0,i,obj,blockEnd;for(i=0;i<allocatedArray.length;i++){obj=allocatedArray[i];blockEnd=blockStart+obj.allocation;if((random>=blockStart)&&(random<blockEnd)){return obj;}blockStart=blockEnd;}return null;}cn.internal.chooser={chooseCampaign:function(choiceData,country,anon,device,random){var filteredChoiceData=makeFilteredChoiceData(choiceData,country,anon,device);if(filteredChoiceData.length===0){return null;}setCampaignAllocations(filteredChoiceData);return chooseObjInAllocatedArray(random,filteredChoiceData);},chooseBanner:function(campaign,bucket,anon,device,random){var possibleBanners=makePossibleBanners(campaign,bucket,anon,device);if(possibleBanners.length===0){return null;}setBannerAllocations(possibleBanners);return chooseObjInAllocatedArray(random,possibleBanners);}};})(jQuery,mediaWiki);(function($,mw){var LEGACY_COOKIE='centralnotice_buckets_by_campaign',
buckets=null,campaign=null;function escapeCampaignName(name){return name.replace(/[*!]/g,function(match){return'&#'+match.charCodeAt(0);});}function decodeCampaignName(name){return name.replace(/&#(33|42)/,function(match,$1){return String.fromCharCode($1);});}function loadBuckets(){var cookieVal=$.cookie('CN');buckets={};if(!cookieVal){cookieVal=$.cookie(LEGACY_COOKIE);if(cookieVal){$.removeCookie(LEGACY_COOKIE,{path:'/'});try{$.extend(buckets,JSON.parse(cookieVal));}catch(e){}if(!$.isEmptyObject(buckets)){storeBuckets();}}return;}$.each(cookieVal.split('*'),function(idx,strBucket){var parts=strBucket.split('!'),key=decodeCampaignName(parts[0]),start=parseInt(parts[1],10)+14e8,end=start+parseInt(parts[2],10),val=parts[3];if(key&&start&&end&&val!==undefined){buckets[key]={start:start,end:end,val:val};}});}function storeBuckets(){var expires=Math.ceil((new Date())/1000),cookieVal=$.map(buckets,function(opts,key){var parts=[escapeCampaignName(key),Math.floor(opts.start-14e8),Math.ceil(
opts.end-opts.start),opts.val];if(opts.end>expires){expires=Math.ceil(opts.end);}return parts.join('!');}).join('*');$.cookie('CN',cookieVal,{expires:new Date(expires*1000),path:'/',});}function getRandomBucket(){return Math.floor(Math.random()*mw.config.get('wgNoticeNumberOfControllerBuckets'));}function retrieveProcessAndGet(){var campaignName=campaign.name,campaignStartDate,bucket,bucketEndDate,retrievedBucketEndDate,val,extension=mw.config.get('wgCentralNoticePerCampaignBucketExtension'),now=new Date(),bucketsModified=!1;campaignStartDate=new Date();campaignStartDate.setTime(campaign.start*1000);bucketEndDate=new Date();bucketEndDate.setTime(campaign.end*1000);bucketEndDate.setUTCDate(bucketEndDate.getUTCDate()+extension);loadBuckets();bucket=buckets[campaignName];if(bucket&&bucketEndDate>now){retrievedBucketEndDate=new Date();retrievedBucketEndDate.setTime(bucket.end*1000);if(retrievedBucketEndDate.getTime()!==bucketEndDate.getTime()){bucket.end=bucketEndDate.getTime()/1000;
bucketsModified=!0;}}else{val=getRandomBucket();bucket={val:val,start:campaignStartDate.getTime()/1000,end:bucketEndDate.getTime()/1000};buckets[campaignName]=bucket;bucketsModified=!0;}for(campaignName in buckets){bucketEndDate=new Date();bucketEndDate.setTime(buckets[campaignName].end*1000);if(bucketEndDate<now){delete buckets[campaignName];bucketsModified=!0;}}if(bucketsModified){storeBuckets();}}mw.centralNotice.internal.bucketer={setCampaign:function(c){campaign=c;},process:function(){retrieveProcessAndGet();},getBucket:function(){return buckets[campaign.name].val;},setBucket:function(val){buckets[campaign.name].val=val;storeBuckets();}};})(jQuery,mediaWiki);(function($,mw){var category,cookieName,shouldHide=!1,reason,durations=mw.config.get('wgNoticeCookieDurations'),HIDE_COOKIE_PREFIX='centralnotice_hide_';function removeCookie(){$.cookie(cookieName,null,{path:'/'});}mw.centralNotice.internal.hide={setCategory:function(c){category=c;cookieName=HIDE_COOKIE_PREFIX+
category;},processCookie:function(){var rawCookieVal=$.cookie(cookieName),hideData,now;if(!rawCookieVal){return;}if(rawCookieVal==='hide'){removeCookie();return;}try{hideData=JSON.parse(rawCookieVal);}catch(e){removeCookie();return;}now=new Date().getTime()/1000;if(now<hideData.created+durations[hideData.reason]){shouldHide=!0;reason=hideData.reason;}},shouldHide:function(){return shouldHide;},getReason:function(){return reason;},setHideWithCloseButtonCookies:function(){var duration=durations.close,date=new Date(),hideData={v:1,created:Math.floor(date.getTime()/1000),reason:'close'};date.setSeconds(date.getSeconds()+duration);$.cookie(cookieName,JSON.stringify(hideData),{expires:date,path:'/'});$.each(mw.config.get('wgNoticeHideUrls'),function(i,val){var url=new mw.Uri(val);url.extend({'duration':duration,'category':category,'reason':'close'});document.createElement('img').src=url.toString();});}};})(jQuery,mediaWiki);},{"css":["@media print{#centralNotice{display:none}}"]});mw.loader.implement("ext.centralNotice.geoIP",function($,jQuery){(function($,mw){var COOKIE_NAME='GeoIP',GEOIP_LOOKUP_URL='//geoiplookup.wikimedia.org/';function parseCookieValue(cookieValue){var matches=cookieValue.match(/([^:]*):([^:]*):([^:]*):([^:]*):([^:]*):([^;]*)/)||cookieValue.match(/([^:]*):([^:]*):([^:]*):([^:]*):([^;]*)/);if(!matches){return null;}if(matches.length===6){matches=matches.slice(0,2).concat(['']).concat(matches.slice(2));}return{country:matches[1],region:matches[2],city:matches[3],lat:matches[4]&&parseFloat(matches[4]),lon:matches[5]&&parseFloat(matches[5]),af:matches[6]};}function serializeCookieValue(geoObj){var parts=[geoObj.country,geoObj.region,(geoObj.city&&geoObj.city.replace(/[^a-z]/i,'_'))||'',geoObj.lat,geoObj.lon,(geoObj.IP&&geoObj.IP.match(':'))?'v6':'v4'];return parts.join(':');}function isGeoDataValid(geoObj){return(typeof geoObj.country==='string'&&(geoObj.country.length===2||geoObj.country.length===0)&&geoObj.af!=='vx');}mw.geoIP={deferred:$.
Deferred(),setWindowGeo:function(){var cookieValue=$.cookie(COOKIE_NAME),geoObj;if(cookieValue){geoObj=parseCookieValue(cookieValue);if(geoObj&&isGeoDataValid(geoObj)){window.Geo=geoObj;mw.geoIP.deferred.resolve();return;}}window.Geo={country:'',region:'',city:'',lat:'',lon:'',af:'vx'};$.ajax({url:GEOIP_LOOKUP_URL,dataType:'script',cache:!0}).always(function(){if(!window.Geo||typeof window.Geo!=='object'){mw.log('window.Geo cleared or '+'incorrectly set by GeoIP lookup.');mw.geoIP.deferred.reject();return;}if(!isGeoDataValid(window.Geo)){mw.geoIP.deferred.reject();return;}cookieValue=serializeCookieValue(window.Geo);$.cookie(COOKIE_NAME,cookieValue,{path:'/'});mw.geoIP.deferred.resolve();});},getPromise:function(){return mw.geoIP.deferred.promise();}};mw.geoIP.setWindowGeo();})(jQuery,mediaWiki);});mw.loader.implement("ext.centralNotice.kvStore",function($,jQuery){(function($,mw){var KVStorageContext,kvStore,error=null,campaignName=null,bannerName=null,category=null,now=Math.round((new Date()).getTime()/1000),SEPARATOR='|',FIND_KEY_REGEX=/\|([^|]*)$/,PREFIX='CentralNoticeKV',ITEM_TTL=15768000;KVStorageContext=function(key){this.key=key;};function setError(message,key,value,context){error={message:message,key:key,value:value,context:context?context.key:null,time:new Date()};error.campaign=campaignName;error.banner=bannerName;mw.log('CentralNotice KV storage error: '+JSON.stringify(error));}function makeKeyForLocalStorage(key,context){var base=PREFIX+SEPARATOR+context.key+SEPARATOR;switch(context.key){case kvStore.contexts.CAMPAIGN.key:return base+campaignName+SEPARATOR+key;case kvStore.contexts.CATEGORY.key:return base+category+SEPARATOR+key;case kvStore.contexts.GLOBAL.key:return base+key;default:setError('Invalid KV storage context',key,null,context);return base+'invalidContext'
+SEPARATOR+key;}}kvStore=mw.centralNotice.kvStore={contexts:{CAMPAIGN:new KVStorageContext('campaign'),CATEGORY:new KVStorageContext('category'),GLOBAL:new KVStorageContext('global')},isAvailable:function(){return Boolean(window.localStorage);},setItem:function(key,value,context){var lsKey,encodedWrappedValue;if(key.indexOf(SEPARATOR)!==-1){setError('Invalid key',key,value,context);return false;}lsKey=makeKeyForLocalStorage(key,context);encodedWrappedValue=JSON.stringify({expiry:ITEM_TTL+now,val:value});localStorage.setItem(lsKey,encodedWrappedValue);if(localStorage.getItem(lsKey)!==encodedWrappedValue){setError('Couldn\'t write value',key,value,context);return false;}return true;},getItem:function(key,context){var lsKey=makeKeyForLocalStorage(key,context),rawValue,wrappedValue;rawValue=localStorage.getItem(lsKey);if(rawValue===null){return null;}try{wrappedValue=JSON.parse(rawValue);}catch(e){if(e instanceof SyntaxError){setError('Couldn\'t parse value, removing. '+e.message,key,
rawValue,context);localStorage.removeItem(lsKey);return null;}else{setError('Couldn\'t read value '+e.message,key,rawValue,context);throw e;}}if(!wrappedValue.expiry||wrappedValue.expiry<now){return null;}return wrappedValue.val;},removeItem:function(key,context){var lsKey=makeKeyForLocalStorage(key,context);localStorage.removeItem(lsKey);},getError:function(){return error;},setNotAvailableError:function(){setError('LocalStorage not available.',null,null);},setMaintenanceError:function(lsKey){var m=lsKey.match(FIND_KEY_REGEX),key=m?m[1]:null;setError('Error during KVStore maintenance.',key,null);},setCampaignName:function(cName){campaignName=cName;},setBannerName:function(bName){bannerName=bName;},setCategory:function(c){category=c;}};})(jQuery,mediaWiki);});mw.loader.implement("ext.centralNotice.kvStoreMaintenance",function($,jQuery){(function($,mw){var now=Math.round((new Date()).getTime()/1000),cn,PREFIX_REGEX=/^CentralNoticeKV/,LEEWAY_FOR_REMOVAL=86400,MAX_BATCH_SIZE=10,MAX_ITEMS_TO_PROCESS=60;function makeRemoveExpiredBatchFunction(keys){return function(){var n,key,rawValue,value;for(n=0;n<keys.length;n++){key=keys[n];if(!PREFIX_REGEX.test(key)){continue;}rawValue=localStorage.getItem(key);if(rawValue===null){continue;}try{value=JSON.parse(rawValue);}catch(e){localStorage.removeItem(key);if(cn.kvStore){cn.kvStore.setMaintenanceError(key);}continue;}if(!value.expiry||(value.expiry+LEEWAY_FOR_REMOVAL)<now){localStorage.removeItem(key);}}};}mw.centralNotice=cn=(mw.centralNotice||{});cn.kvStoreMaintenance={removeExpiredItemsWhenIdle:function(){var funcs,keys,i,stopBefore,key,j=0,keysToProcess;if(!window.localStorage||localStorage.length===0){return;}i=Math.floor(Math.random()*localStorage.length);stopBefore=(i+Math.min(
MAX_ITEMS_TO_PROCESS,localStorage.length))%localStorage.length;keys=[];do{key=localStorage.key(i);if(key!==null){keys.push(key);}i++;if(i===localStorage.length){i=i-localStorage.length;}}while(i!==stopBefore);funcs=[];while(j<keys.length){keysToProcess=keys.slice(j,Math.min(keys.length,j+MAX_BATCH_SIZE));funcs.push(makeRemoveExpiredBatchFunction(keysToProcess));j+=MAX_BATCH_SIZE;}cn.doIdleWork(funcs);}};})(jQuery,mediaWiki);});mw.loader.implement("ext.centralNotice.legacySupport",function($,jQuery){(function($,mw){var cn=mw.centralNotice,mixin=new cn.Mixin('legacySupport');mixin.setPreBannerHandler(function(mixinParams){if(mixinParams.setSRISampleRate){cn.setRecordImpressionSampleRate(mixinParams.sriSampleRate);}if(mixinParams.bannersNotGuaranteedToDisplay){cn.setBannersNotGuaranteedToDisplay();}});cn.registerCampaignMixin(mixin);})(jQuery,mediaWiki);});mw.loader.implement("ext.centralNotice.startUp",function($,jQuery){(function($,mw){var cn=mw.centralNotice;if(mw.config.get('wgNamespaceNumber')==-1){return;}cn.doIdleWork=function(funcs){funcs=$.isArray(funcs)?funcs:[funcs];$(function(){var i;for(i=0;i<funcs.length;i++){setTimeout(funcs[i],1000*(i+1));}});};$(function(){$('#siteNotice').prepend('<div id="centralNotice"></div>');});if(mw.util.getParamValue('banner')){mw.loader.using('ext.centralNotice.display').done(function(){cn.displayTestingBanner();});return;}if(cn.choiceData===undefined){mw.log('No choice data set for CentralNotice campaign '+'and banner selection.');return;}cn.doIdleWork(cn.kvStoreMaintenance.removeExpiredItemsWhenIdle);if(cn.choiceData.length===0){return;}cn.chooseAndMaybeDisplay();})(jQuery,mediaWiki);});mw.loader.implement("ext.centralauth.centralautologin",function($,jQuery){(function(mw){var url,params,len,param,i;if(mw.config.get('wgUserName')!==null){return;}if(mw.config.get('wgCanonicalSpecialPageName')!=='Userlogin'){try{if(+localStorage.getItem('CentralAuthAnon')>new Date().getTime()){return;}}catch(e){}if(/(^|; )CentralAuthAnon=1/.test(document.cookie)){return;}}url=mw.config.get('wgCentralAuthCheckLoggedInURL');if(url){url+='&proto='+encodeURIComponent(location.protocol.replace(':',''));if(mw.config.get('wgCanonicalSpecialPageName')==='Userlogin'){url+='&return=1';params=location.search.slice(1).split('&');len=params.length;for(i=0;i<len;i++){param=params[i].split('=');param=decodeURIComponent(param[0]);if(param==='returnto'||param==='returntoquery'){url+='&'+params[i];}}}mw.loader.load(url);}}(mediaWiki));},{"css":[
"@-webkit-keyframes centralAuthPPersonalAnimation{0%{opacity:0;-webkit-transform:translateY(-20px)}100%{opacity:1;-webkit-transform:translateY(0)}}@-moz-keyframes centralAuthPPersonalAnimation{0%{opacity:0;-moz-transform:translateY(-20px)}100%{opacity:1;-moz-transform:translateY(0)}}@-o-keyframes centralAuthPPersonalAnimation{0%{opacity:0;-o-transform:translateY(-20px)}100%{opacity:1;-o-transform:translateY(0)}}@keyframes centralAuthPPersonalAnimation{0%{opacity:0;transform:translateY(-20px)}100%{opacity:1;transform:translateY(0)}}.centralAuthPPersonalAnimation{-webkit-animation-duration:1s;-moz-animation-duration:1s;-o-animation-duration:1s;animation-duration:1s;-webkit-animation-fill-mode:both;-moz-animation-fill-mode:both;-o-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-name:centralAuthPPersonalAnimation;-moz-animation-name:centralAuthPPersonalAnimation;-o-animation-name:centralAuthPPersonalAnimation;animation-name:centralAuthPPersonalAnimation}"]});mw.loader.implement("ext.gadget.WatchlistBase",function($,jQuery){},{"css":["#mw-wlheader-showupdated,#mw-wlheader-bold,#mw-wlheader-green,#mw-watchlist-resetbutton{display:none}.mw-changeslist-line-watched .mw-title,.mw-enhanced-watched .mw-enhanced-rc-time{font-weight:normal}"]});mw.loader.implement("ext.gadget.WatchlistGreenIndicators",function($,jQuery){},{"css":[
"#mw-wlheader-showupdated,#mw-wlheader-green{display:inline}#mw-watchlist-resetbutton{display:block}li.mw-changeslist-line-watched,li.mw-history-line-updated{list-style-image:url(//upload.wikimedia.org/wikipedia/commons/1/19/ChangedBulletVector.svg);list-style-image:url(//upload.wikimedia.org/wikipedia/commons/c/c2/ChangedBulletVector.png)\\9} td.mw-enhanced-rc,.mw-enhanced-rc-time{font-family:monospace,monospace}.mw-enhanced-rc-nested{background-position:0 3px}.mw-enhancedchanges-arrow-space{background-position:center top}.mw-enhanced-rc-nested,.mw-enhancedchanges-arrow-space{background-repeat:no-repeat;background-image:url(//en.wikipedia.org/w/skins/Vector/images/bullet-icon.svg);background-image:-moz-linear-gradient(transparent,transparent),url(//en.wikipedia.org/w/skins/Vector/images/bullet-icon.svg);background-image:-webkit-linear-gradient(transparent,transparent),url(//en.wikipedia.org/w/skins/Vector/images/bullet-icon.svg);background-image:linear-gradient(transparent,transparent),url(//en.wikipedia.org/w/skins/Vector/images/bullet-icon.svg)}.mw-enhanced-watched .mw-enhanced-rc-nested,.mw-changeslist-line-watched .mw-enhancedchanges-arrow-space{background-image:url(//upload.wikimedia.org/wikipedia/commons/c/c2/ChangedBulletVector.png);background-image:-moz-linear-gradient(transparent,transparent),url(//upload.wikimedia.org/wikipedia/commons/1/19/ChangedBulletVector.svg);background-image:-webkit-linear-gradient(transparent,transparent),url(//upload.wikimedia.org/wikipedia/commons/1/19/ChangedBulletVector.svg);background-image:linear-gradient(transparent,transparent),url(//upload.wikimedia.org/wikipedia/commons/1/19/ChangedBulletVector.svg)}.mw-changeslist-line-not-watched .mw-collapsible-arrow.mw-collapsible-toggle-collapsed{background-position:center top;background-image:url(//upload.wikimedia.org/wikipedia/commons/b/bc/Vector_right_arrow_link.png);background-image:-moz-linear-gradient(transparent,transparent),url(//upload.wikimedia.org/wikipedia/commons/3/39/Vector_right_arrow_link.svg);background-image:-webkit-linear-gradient(transparent,transparent),url(//upload.wikimedia.org/wikipedia/commons/3/39/Vector_right_arrow_link.svg);background-image:linear-gradient(transparent,transparent),url(//upload.wikimedia.org/wikipedia/commons/3/39/Vector_right_arrow_link.svg)}.mw-changeslist-line-not-watched .mw-collapsible-arrow.mw-collapsible-toggle-expanded{background-position:center top;background-image:url(//upload.wikimedia.org/wikipedia/commons/2/27/Vector_down_arrow_link.png);background-image:-moz-linear-gradient(transparent,transparent),url(//upload.wikimedia.org/wikipedia/commons/d/db/Vector_down_arrow_link.svg);background-image:-webkit-linear-gradient(transparent,transparent),url(//upload.wikimedia.org/wikipedia/commons/d/db/Vector_down_arrow_link.svg);background-image:linear-gradient(transparent,transparent),url(//upload.wikimedia.org/wikipedia/commons/d/db/Vector_down_arrow_link.svg)}.mw-changeslist-line-watched .mw-collapsible-arrow.mw-collapsible-toggle-collapsed{background-image:url(//upload.wikimedia.org/wikipedia/commons/a/af/Vector_right_arrow_changed.png);background-image:-moz-linear-gradient(transparent,transparent),url(//upload.wikimedia.org/wikipedia/commons/0/03/Vector_right_arrow_changed.svg);background-image:-webkit-linear-gradient(transparent,transparent),url(//upload.wikimedia.org/wikipedia/commons/0/03/Vector_right_arrow_changed.svg);background-image:linear-gradient(transparent,transparent),url(//upload.wikimedia.org/wikipedia/commons/0/03/Vector_right_arrow_changed.svg)}.mw-changeslist-line-watched .mw-collapsible-arrow.mw-collapsible-toggle-expanded{background-image:url(//upload.wikimedia.org/wikipedia/commons/e/e5/Vector_down_arrow_changed.png);background-image:-moz-linear-gradient(transparent,transparent),url(//upload.wikimedia.org/wikipedia/commons/1/12/Vector_down_arrow_changed.svg);background-image:-webkit-linear-gradient(transparent,transparent),url(//upload.wikimedia.org/wikipedia/commons/1/12/Vector_down_arrow_changed.svg);background-image:linear-gradient(transparent,transparent),url(//upload.wikimedia.org/wikipedia/commons/1/12/Vector_down_arrow_changed.svg)}"
]});mw.loader.implement("ext.uls.init",function($,jQuery){(function($,mw){'use strict';var hasOwn=Object.prototype.hasOwnProperty;mw.uls=mw.uls||{};mw.uls.previousLanguagesStorageKey='uls-previous-languages';mw.uls.previousLanguageAutonymCookie='uls-previous-language-autonym';mw.uls.languageSettingsModules=['ext.uls.inputsettings','ext.uls.displaysettings'];mw.uls.languageSelectionMethod=undefined;mw.uls.addEventLoggingTriggers=function(){mw.uls.languageSelectionMethod=undefined;$('#uls-map-block').on('click',function(){mw.uls.languageSelectionMethod='map';});$('#uls-languagefilter').on('keydown',function(){if($(this).val()===''){mw.uls.languageSelectionMethod='search';}});$('#uls-lcd-quicklist a').on('click',function(){mw.uls.languageSelectionMethod='common';});};mw.uls.changeLanguage=function(language){var deferred=new $.Deferred();function changeLanguageAnon(){if(mw.config.get('wgULSAnonCanChangeLanguage')){mw.cookie.set('language',language);location.reload();}}deferred.done(function(){
var api;if(mw.user.isAnon()){changeLanguageAnon();return;}api=new mw.Api();api.postWithToken('options',{action:'options',optionname:'language',optionvalue:language}).done(function(){location.reload();}).fail(function(){changeLanguageAnon();});});mw.hook('mw.uls.interface.language.change').fire(language,deferred);window.setTimeout(function(){deferred.resolve();},mw.config.get('wgULSEventLogging')*500);};mw.uls.setPreviousLanguages=function(previousLanguages){try{localStorage.setItem(mw.uls.previousLanguagesStorageKey,JSON.stringify(previousLanguages.slice(-5)));}catch(e){}};mw.uls.getPreviousLanguages=function(){var previousLanguages=$.cookie(mw.uls.previousLanguagesStorageKey);$.removeCookie(mw.uls.previousLanguagesStorageKey,{path:'/'});if($.isArray(previousLanguages)){mw.uls.setPreviousLanguages(previousLanguages);}else{previousLanguages=[];}try{previousLanguages.push.apply(previousLanguages,JSON.parse(localStorage.getItem(mw.uls.previousLanguagesStorageKey)));}catch(e){}return previousLanguages
.slice(-5);};mw.uls.getBrowserLanguage=function(){return(window.navigator.language||window.navigator.userLanguage||'').split('-')[0];};mw.uls.getCountryCode=function(){return window.Geo&&(window.Geo.country||window.Geo.country_code);};mw.uls.getAcceptLanguageList=function(){return mw.config.get('wgULSAcceptLanguageList')||[];};mw.uls.getFrequentLanguageList=function(countryCode){var unique=[],list=[mw.config.get('wgUserLanguage'),mw.config.get('wgContentLanguage'),mw.uls.getBrowserLanguage()].concat(mw.uls.getPreviousLanguages()).concat(mw.uls.getAcceptLanguageList());countryCode=countryCode||mw.uls.getCountryCode();if(countryCode){list=list.concat($.uls.data.getLanguagesInTerritory(countryCode));}$.each(list,function(i,v){if($.inArray(v,unique)===-1){unique.push(v);}});unique=$.grep(unique,function(langCode){var target;if(hasOwn.call($.fn.uls.defaults.languages,langCode)){return true;}target=$.uls.data.isRedirect(langCode);if(target){return hasOwn.call($.fn.uls.defaults.languages,
target);}return false;});return unique;};function isBrowserSupported(){var blacklist={'msie':[['<=',7]]};return!$.client.test(blacklist,null,true);}mw.uls.init=function(callback){if(!isBrowserSupported()){$('#pt-uls').hide();return;}if(callback){callback.call(this);}};$(document).ready(function(){mw.uls.init();});}(jQuery,mediaWiki));},{"css":[
".uls-menu a{cursor:pointer}.uls-menu.callout .caret-before{border-top:20px solid transparent;border-right:20px solid #C9C9C9;border-bottom:20px solid transparent;display:inline-block;left:-21px;top:30px;position:absolute}.uls-menu.callout .caret-after{border-top:20px solid transparent;border-right:20px solid #FCFCFC;border-bottom:20px solid transparent;display:inline-block;left:-20px;top:30px;position:absolute}.uls-ui-languages button{width:23%;text-overflow:ellipsis;margin-right:4%}button.uls-more-languages{width:auto}.settings-title{font-size:11pt}.settings-text{color:#555555;font-size:9pt}div.display-settings-block:hover .settings-text{color:#252525}"]});mw.loader.implement("ext.uls.interface",function($,jQuery){(function($,mw){'use strict';function displaySettings(){var $displaySettingsTitle,displaySettingsText,$displaySettings;displaySettingsText=$.i18n('ext-uls-display-settings-desc');$displaySettingsTitle=$('<div data-i18n="ext-uls-display-settings-title">').addClass('settings-title').attr('title',displaySettingsText);$displaySettings=$('<div>').addClass('display-settings-block').prop('id','display-settings-block').append($displaySettingsTitle.i18n());return $displaySettings;}function inputSettings(){var $inputSettingsTitle,inputSettingsText,$inputSettings;inputSettingsText=$.i18n('ext-uls-input-settings-desc');$inputSettingsTitle=$('<div data-i18n="ext-uls-input-settings-title">').addClass('settings-title').attr('title',inputSettingsText);$inputSettings=$('<div>').addClass('input-settings-block').prop('id','input-settings-block').append($inputSettingsTitle.i18n());return $inputSettings;}function addDisplaySettings(uls){var
$displaySettings=displaySettings();uls.$menu.find('#uls-settings-block').append($displaySettings);$displaySettings.on('click',function(){var languagesettings=$displaySettings.data('languagesettings'),displaySettingsOptions={defaultModule:'display'},ulsPosition=mw.config.get('wgULSPosition'),anonMode=(mw.user.isAnon()&&!mw.config.get('wgULSAnonCanChangeLanguage'));if(!languagesettings){if(ulsPosition==='personal'&&!anonMode){displaySettingsOptions.onClose=function(){uls.show();};}$.extend(displaySettingsOptions,uls.position());mw.loader.using(mw.uls.languageSettingsModules,function(){$displaySettings.languagesettings(displaySettingsOptions).click();});}mw.hook('mw.uls.settings.open').fire('uls');uls.hide();});}function addInputSettings(uls){var $inputSettings=inputSettings();uls.$menu.find('#uls-settings-block').append($inputSettings);$inputSettings.on('click',function(){var position=uls.position(),languagesettings=$inputSettings.data('languagesettings');if(!languagesettings){mw.loader.
using(mw.uls.languageSettingsModules,function(){$inputSettings.languagesettings({defaultModule:'input',onClose:function(){uls.show();},top:position.top,left:position.left}).click();});}mw.hook('mw.uls.settings.open').fire('uls');uls.hide();});}function addAccessibilityFeatures($target){$target.attr({tabIndex:0,role:'button','aria-haspopup':!0});$target.click(function(){$(this).css('outline','none');});$target.blur(function(){$(this).css('outline','');});$target.keydown(function(event){if(event.keyCode===13){$(this).click();event.preventDefault();event.stopPropagation();}});}function getUndoAutonym(code){var deferred=$.Deferred(),autonym=$.cookie(mw.uls.previousLanguageAutonymCookie);if(autonym){deferred.resolve(autonym);}else{mw.loader.using('jquery.uls.data',function(){deferred.resolve($.uls.data.getAutonym(code));});}return deferred.promise();}function showULSTooltip(){var previousLang,$ulsTrigger,anonMode,showUndo,newLanguage,previousLanguages,ulsPosition=mw.config.get(
'wgULSPosition'),currentLang=mw.config.get('wgUserLanguage'),rtlPage=$('body').hasClass('rtl'),tipsyGravity={personal:'n',interlanguage:rtlPage?'e':'w'};$ulsTrigger=(ulsPosition==='interlanguage')?$('.uls-settings-trigger'):$('.uls-trigger');previousLanguages=mw.uls.getPreviousLanguages()||[];previousLang=previousLanguages.slice(-1)[0];newLanguage=currentLang!==previousLang;anonMode=(mw.user.isAnon()&&!mw.config.get('wgULSAnonCanChangeLanguage'));showUndo=!anonMode&&newLanguage&&previousLang!==undefined;if(newLanguage){previousLanguages.push(currentLang);mw.uls.setPreviousLanguages(previousLanguages);}if(!showUndo){$ulsTrigger.tipsy({gravity:tipsyGravity[ulsPosition]});return;}getUndoAutonym(previousLang).done(function(autonym){$ulsTrigger.tipsy({gravity:tipsyGravity[ulsPosition],delayOut:3000,html:!0,fade:!0,trigger:'manual',title:function(){var link;link=$('<a>').text(autonym).attr({href:'#','class':'uls-prevlang-link',lang:previousLang,dir:'auto'});link=$('<div>').html(link).
html();return mw.message('ext-uls-undo-language-tooltip-text','$1').escaped().replace('$1',link);}});});$.cookie(mw.uls.previousLanguageAutonymCookie,mw.config.get('wgULSCurrentAutonym'),{path:'/'});function showTipsy(timeout){var tipsyTimer=0;$ulsTrigger.tipsy('show');$('.tipsy').on('mouseover',function(){window.clearTimeout(tipsyTimer);});$('.tipsy').on('mouseout',function(){tipsyTimer=window.setTimeout(hideTipsy,timeout);});$('.tipsy').on('click',hideTipsy);$('a.uls-prevlang-link').on('click.ulstipsy',function(event){var deferred=$.Deferred();event.preventDefault();deferred.done(function(){mw.uls.changeLanguage(event.target.lang);});mw.hook('mw.uls.language.revert').fire(deferred);window.setTimeout(function(){deferred.resolve();},mw.config.get('wgULSEventLogging')*500);});tipsyTimer=window.setTimeout(hideTipsy,timeout);}function hideTipsy(){$ulsTrigger.tipsy('hide');}window.setTimeout(function(){showTipsy(6000);},700);$ulsTrigger.on('mouseover',function(){if(!$('.uls-menu:visible').
length){showTipsy(3000);}});}$(document).ready(function(){mw.uls.init(function(){var $triggers,$pLang,$ulsTrigger=$('.uls-trigger'),rtlPage=$('body').hasClass('rtl'),anonMode=(mw.user.isAnon()&&!mw.config.get('wgULSAnonCanChangeLanguage')),imeSelector=mw.config.get('wgULSImeSelectors').join(', '),ulsPosition=mw.config.get('wgULSPosition');if(ulsPosition==='interlanguage'){$pLang=$('#p-lang');$ulsTrigger=$('<span>').addClass('uls-settings-trigger');$pLang.prepend($ulsTrigger);$ulsTrigger=$('.uls-settings-trigger');$pLang.find('.uls-p-lang-dummy').remove();if(!$pLang.find('div ul').children().length){$pLang.find('h3').text(mw.msg('uls-plang-title-languages'));}$ulsTrigger.attr({title:mw.msg('ext-uls-select-language-settings-icon-tooltip')});$ulsTrigger.on('click',function(e,eventParams){var languagesettings=$ulsTrigger.data('languagesettings'),languageSettingsOptions;if(languagesettings){if(!languagesettings.shown){mw.hook('mw.uls.settings.open').fire(eventParams&&eventParams.source||
'interlanguage');}}else{languageSettingsOptions={defaultModule:'display',onVisible:function(){var topRowHeight,caretHeight,caretWidth,$caretBefore=$('<span>').addClass('caret-before'),$caretAfter=$('<span>').addClass('caret-after'),ulsTriggerWidth=this.$element.width(),ulsTriggerOffset=this.$element.offset();this.$window.addClass('callout');this.$window.prepend($caretBefore,$caretAfter);if(rtlPage){caretWidth=parseInt($caretBefore.css('border-left-width'),10);this.left=ulsTriggerOffset.left-this.$window.width()-caretWidth;}else{caretWidth=parseInt($caretBefore.css('border-right-width'),10);this.left=ulsTriggerOffset.left+ulsTriggerWidth+caretWidth;}topRowHeight=this.$window.find('.row').height();caretHeight=parseInt($caretBefore.css('top'),10);this.top=ulsTriggerOffset.top-topRowHeight-caretHeight/2;this.position();}};mw.loader.using(mw.uls.languageSettingsModules,function(){$ulsTrigger.languagesettings(languageSettingsOptions).click();});e.stopPropagation();}});}else if(anonMode){
$ulsTrigger.on('click',function(e,eventParams){var languagesettings=$ulsTrigger.data('languagesettings');e.preventDefault();if(languagesettings){if(!languagesettings.shown){mw.hook('mw.uls.settings.open').fire(eventParams&&eventParams.source||'personal');}}else{mw.loader.using(mw.uls.languageSettingsModules,function(){$ulsTrigger.languagesettings();$ulsTrigger.trigger('click',eventParams);});}});}else{$ulsTrigger.on('click',function(e,eventParams){var uls=$ulsTrigger.data('uls');e.preventDefault();if(uls){if(!uls.shown){mw.hook('mw.uls.settings.open').fire(eventParams&&eventParams.source||'personal');}}else{mw.loader.using('ext.uls.mediawiki',function(){$ulsTrigger.uls({quickList:function(){return mw.uls.getFrequentLanguageList();},onReady:function(){var uls=this;mw.loader.using(mw.uls.languageSettingsModules,function(){addDisplaySettings(uls);addInputSettings(uls);});},onSelect:function(language){mw.uls.changeLanguage(language);},onVisible:function(){mw.uls.addEventLoggingTriggers();}
});window.setTimeout(function(){$ulsTrigger.trigger('click',eventParams);},0);});}});}$triggers=$('.uls-settings-trigger, .uls-trigger');addAccessibilityFeatures($triggers);$('#uls-preferences-link').text(mw.msg('ext-uls-language-settings-preferences-link')).click(function(){$ulsTrigger.trigger('click',{source:'preferences'});return false;});showULSTooltip();$('body').on('focus.imeinit',imeSelector,function(){var $input=$(this);$('body').off('.imeinit');mw.loader.using('ext.uls.ime',function(){mw.ime.setup();mw.ime.handleFocus($input);});});});});}(jQuery,mediaWiki));},{},{"ext-uls-language-settings-preferences-link":"More language settings","ext-uls-select-language-settings-icon-tooltip":"Language settings","ext-uls-undo-language-tooltip-text":"Language changed from $1","uls-plang-title-languages":"Languages"});mw.loader.implement("ext.uls.preferences",function($,jQuery){(function($,mw){'use strict';var ULSPreferences;function preferenceStore(){return{set:function(key,value){if(typeof value==='object'){value=JSON.stringify(value);}try{localStorage.setItem(key,value);}catch(e){$.cookie(key,value,{path:'/'});}},get:function(key){var data;try{data=localStorage.getItem(key);if(!data){try{data=JSON.parse(localStorage.getItem('jStorage'))['uls-preferences'];localStorage.removeItem('jStorage');}catch(e){}}}catch(e){data=$.cookie(key);}try{data=JSON.parse(data);}catch(e){data=data;}return data;}};}ULSPreferences=function(){this.preferenceName='uls-preferences';this.username=mw.user.getName();this.isAnon=mw.user.isAnon();this.preferences=null;this.init();};ULSPreferences.prototype={init:function(){if(this.isAnon){this.preferences=preferenceStore().get(this.preferenceName);}else{var options=mw.user.options.get(this.preferenceName);if(!options){options='{}';}try{this.preferences=JSON.parse(options);}
catch(e){this.preferences={};}}this.preferences=this.preferences||{};},set:function(key,value){this.preferences[key]=value;},get:function(key){return this.preferences[key];},save:function(callback){var ulsPreferences=this;callback=callback||$.noop;if(this.isAnon){preferenceStore().set(this.preferenceName,this.preferences);callback.call(this,true);}else{new mw.Api().postWithToken('options',{action:'options',optionname:ulsPreferences.preferenceName,optionvalue:JSON.stringify(ulsPreferences.preferences)}).done(function(){callback.call(this,true);}).fail(function(){callback.call(this,false);});}}};mw.uls=mw.uls||{};mw.uls.preferences=function(){var data=$('body').data('preferences');if(!data){$('body').data('preferences',(data=new ULSPreferences()));}return data;};}(jQuery,mediaWiki));});mw.loader.implement("ext.uls.webfonts",function($,jQuery){(function($,mw){'use strict';var ulsPreferences,tofuSalt='\u0D00',tofuLanguages={};mw.webfonts=mw.webfonts||{};ulsPreferences=mw.uls.preferences();mw.webfonts.preferences={registry:{fonts:{},webfontsEnabled:mw.config.get('wgULSWebfontsEnabled')},isEnabled:function(){return this.registry.webfontsEnabled;},enable:function(){this.registry.webfontsEnabled=!0;},disable:function(){this.registry.webfontsEnabled=!1;},setFont:function(language,font){this.registry.fonts[language]=font;},getFont:function(language){return this.registry.fonts[language];},save:function(callback){ulsPreferences=mw.uls.preferences();ulsPreferences.set('webfonts',this.registry);ulsPreferences.save(callback);},load:function(){mw.webfonts.preferences.registry=$.extend(this.registry,ulsPreferences.get('webfonts'));}};function detectTofu(text){var index,$fixture,width={},height={},length=Math.min(4,text.length),detected=!1;if($.client.test({msie:!1})){
text=tofuSalt+text;}$fixture=$('<span>').css({fontSize:'72px',fontFamily:'sans-serif'}).appendTo('body');for(index=0;index<length;index++){$fixture.text(text[index]);width[index]=$fixture.width()||width[index-1];height[index]=$fixture.height();if(index>0&&(width[index]!==width[index-1]||height[index]!==height[index-1])){detected=!1;break;}}$fixture.remove();if(index===length){detected=!0;}return detected;}mw.webfonts.setup=function(){var mediawikiFontRepository=$.webfonts.repository;mediawikiFontRepository.base=mw.config.get('wgULSFontRepositoryBasePath');$.extend($.fn.webfonts.defaults,{repository:mediawikiFontRepository,fontStack:$('body').css('font-family').split(/, /g),fontSelector:function(repository,language,classes){var font,autonym,defaultFont;if(!language){return null;}defaultFont=repository.defaultFont(language);if(classes&&$.inArray('autonym',classes)>=0){autonym=!0;}font=mw.webfonts.preferences.getFont(language);if(!font||autonym){if((!defaultFont||defaultFont===
'system')&&!autonym){return font;}if(tofuLanguages[language]===undefined){tofuLanguages[language]=detectTofu($.uls.data.getAutonym(language));if(tofuLanguages[language]){mw.log('tofu detected for '+language);mw.hook('mw.uls.webfonts.tofudetected').fire(language);}}if(tofuLanguages[language]){font=autonym?'Autonym':defaultFont;}else{font='system';}}if(font==='system'){font=null;}return font;},exclude:(function(){var excludes=mw.config.get('wgULSNoWebfontsSelectors').join(', ');if(mw.user.options.get('editfont')!=='default'){excludes=excludes?excludes+',textarea':'textarea';}return excludes;}()),overridableFontFamilies:(function(){var headingFont=$('h1').css('font-family');return headingFont?[headingFont]:[];}())});setTimeout(function(){$('body').webfonts();$('body').data('webfonts').load('Autonym');},0);};$(document).ready(function(){mw.uls.init(function(){mw.webfonts.preferences.load();if(mw.webfonts.preferences.isEnabled()){mw.loader.using('ext.uls.webfonts.fonts',mw.webfonts.setup);}
});});}(jQuery,mediaWiki));});mw.loader.implement("ext.visualEditor.desktopArticleTarget.init",function($,jQuery){(function(){var conf,tabMessages,uri,pageExists,viewUri,veEditUri,isViewPage,init,support,targetPromise,enable,tempdisable,autodisable,userPrefEnabled,active=!1,progressStep=0,progressSteps=[[30,3000],[70,2000],[100,1000]],plugins=[];function showLoading(){var $content,contentRect,offsetTop,windowHeight,top,bottom,middle;if(!init.$loading){init.$loading=$('<div class="ve-init-mw-desktopArticleTarget-loading-overlay">'+'<div class="ve-init-mw-desktopArticleTarget-progress">'+'<div class="ve-init-mw-desktopArticleTarget-progress-bar" style="width: 0;"></div>'+'</div>'+'</div>');}$content=$('#content');contentRect=$content[0].getBoundingClientRect();offsetTop=$content.offset().top;windowHeight=$(window).height();top=Math.max(contentRect.top,0);bottom=Math.min(contentRect.bottom,windowHeight);middle=(top+bottom)/2;init.$loading.css('top',middle-offsetTop);$content.prepend(init.$loading);}function
incrementLoadingProgress(){var step=progressSteps[progressStep];setLoadingProgress(step[0],step[1]);progressStep++;}function resetLoadingProgress(){progressStep=0;setLoadingProgress(0,0);}function setLoadingProgress(target,duration){var $bar=init.$loading.find('.ve-init-mw-desktopArticleTarget-progress-bar').stop();$bar.css('transition','width '+duration+'ms ease-in');setTimeout(function(){$bar.css('width',target+'%');});}function hideLoading(){if(init.$loading){init.$loading.detach();}}function getTarget(){if(!targetPromise){targetPromise=mw.loader.using('ext.visualEditor.targetLoader').then(function(){mw.libs.ve.targetLoader.addPlugin(function(){return mw.loader.using(['user','site']).then(null,function(){return $.Deferred().resolve();});});['ext.visualEditor.desktopArticleTarget','ext.visualEditor.mwimage','ext.visualEditor.mwmeta'].forEach(mw.libs.ve.targetLoader.addPlugin);plugins.forEach(mw.libs.ve.targetLoader.addPlugin);plugins=[];return mw.libs.ve.targetLoader.loadModules();})
.then(function(){var target;ve.init.mw.DesktopArticleTarget.prototype.setupSectionEditLinks=init.setupSectionLinks;target=new ve.init.mw.DesktopArticleTarget();$('#content').append(target.$element);return target;},function(e){mw.log.warn('VisualEditor failed to load: '+e);});}targetPromise.then(function(){setTimeout(function(){mw.loader.load('easy-deflate.deflate');},500);});return targetPromise;}function activateTarget(targetPromise){var dataPromise=mw.loader.using('ext.visualEditor.targetLoader').then(function(){return mw.libs.ve.targetLoader.requestPageData(mw.config.get('wgRelevantPageName'),uri.query.oldid,'mwTarget');}).done(function(){incrementLoadingProgress();});$('html').addClass('ve-activated ve-loading');showLoading();incrementLoadingProgress();active=!0;targetPromise=targetPromise||getTarget();targetPromise.then(function(target){incrementLoadingProgress();target.on('deactivate',function(){active=!1;});target.on('loadError',function(){resetLoadingProgress();});return target
.activate(dataPromise);}).then(function(){resetLoadingProgress();ve.track('mwedit.ready');}).always(hideLoading);}function trackActivateStart(initData){ve.track('trace.activate.enter');ve.track('mwedit.init',initData);mw.libs.ve.activationStart=ve.now();}conf=mw.config.get('wgVisualEditorConfig');tabMessages=conf.tabMessages;uri=new mw.Uri();pageExists=!!mw.config.get('wgRelevantArticleId');viewUri=new mw.Uri(mw.util.getUrl(mw.config.get('wgRelevantPageName')));isViewPage=(mw.config.get('wgIsArticle')&&!('diff'in uri.query));veEditUri=(isViewPage?uri:viewUri).clone().extend({veaction:'edit'});support={es5:!!(Array.isArray&&Array.prototype.filter&&Array.prototype.indexOf&&Array.prototype.map&&Date.now&&Date.prototype.toJSON&&Object.create&&Object.keys&&String.prototype.trim&&window.JSON&&JSON.parse&&JSON.stringify&&Function.prototype.bind),contentEditable:'contentEditable'in document.createElement('div'),svg:!!(document.createElementNS&&document.createElementNS(
'http://www.w3.org/2000/svg','svg').createSVGRect)};init={support:support,blacklist:conf.blacklist,addPlugin:function(plugin){plugins.push(plugin);},setupSkin:function(){init.setupTabs();init.setupSectionLinks();},setupTabs:function(){var caVeEdit,action=pageExists?'edit':'create',pTabsId=$('#p-views').length?'p-views':'p-cactions',$caSource=$('#ca-viewsource'),$caEdit=$('#ca-edit'),$caVeEdit=$('#ca-ve-edit'),$caEditLink=$caEdit.find('a'),$caVeEditLink=$caVeEdit.find('a'),reverseTabOrder=$('body').hasClass('rtl')&&pTabsId==='p-views',caVeEditNextnode=(reverseTabOrder^conf.tabPosition==='before')?$caEdit.get(0):$caEdit.next().get(0);if(mw.config.get('wgNamespaceIds')[true&&'education_program']===mw.config.get('wgNamespaceNumber')){return;}if(!$caVeEdit.length){if($caEdit.length&&!$caSource.length){caVeEdit=mw.util.addPortletLink(pTabsId,veEditUri,tabMessages[action]!==null?mw.msg(tabMessages[action]):$caEditLink.text(),'ca-ve-edit',mw.msg('tooltip-ca-ve-edit'),mw.msg(
'accesskey-ca-ve-edit'),caVeEditNextnode);$caVeEdit=$(caVeEdit);$caVeEditLink=$caVeEdit.find('a');}}else if($caEdit.length&&$caVeEdit.length){if(reverseTabOrder^conf.tabPosition==='before'){if($caEdit[0].nextSibling===$caVeEdit[0]){$caVeEdit.after($caEdit);}}else{if($caVeEdit[0].nextSibling===$caEdit[0]){$caEdit.after($caVeEdit);}}if(tabMessages[action]!==null){$caVeEditLink.text(mw.msg(tabMessages[action]));}}if(!(init.isAvailable&&userPrefEnabled)){$caVeEdit.remove();}if($('#ca-view-foreign').length){if(tabMessages[action+'localdescriptionsource']!==null){$caEditLink.text(mw.msg(tabMessages[action+'localdescriptionsource']));}}else{if(tabMessages[action+'source']!==null){$caEditLink.text(mw.msg(tabMessages[action+'source']));}}if(init.isAvailable){if(conf.tabPosition==='before'){$caEdit.addClass('collapsible');}else{$caVeEdit.addClass('collapsible');}}if(tabMessages[action+'appendix']!==null){$caVeEditLink.append($('<span>').addClass('ve-tabmessage-appendix').text(mw.msg(tabMessages[
action+'appendix'])));}if(tabMessages[action+'sourceappendix']!==null){$caEditLink.append($('<span>').addClass('ve-tabmessage-appendix').text(mw.msg(tabMessages[action+'sourceappendix'])));}if(isViewPage){$caVeEdit.click(init.onEditTabClick);}},setupSectionLinks:function(){var $editsections=$('#mw-content-text .mw-editsection'),bodyDir=$('body').css('direction');if($editsections.css('direction')!==bodyDir){$editsections.css('direction',bodyDir);}if($editsections.find('.mw-editsection-visualeditor').length===0){$editsections.each(function(){var $editsection=$(this),$editSourceLink=$editsection.find('a').eq(0),$editLink=$editSourceLink.clone(),$divider=$('<span>'),dividerText=mw.msg('pipe-separator');if(tabMessages.editsectionsource!==null){$editSourceLink.text(mw.msg(tabMessages.editsectionsource));}if(tabMessages.editsection!==null){$editLink.text(mw.msg(tabMessages.editsection));}$divider.addClass('mw-editsection-divider').text(dividerText);if(!$('#ca-view-foreign').length){$editLink.
attr('href',function(i,val){return new mw.Uri(veEditUri).extend({vesection:new mw.Uri(val).query.section});}).addClass('mw-editsection-visualeditor');if(conf.tabPosition==='before'){$editSourceLink.before($editLink,$divider);}else{$editSourceLink.after($divider,$editLink);}}});}if(tabMessages.editsectionappendix){$editsections.find('.mw-editsection-visualeditor').append($('<span>').addClass('ve-tabmessage-appendix').text(mw.msg(tabMessages.editsectionappendix)));}if(tabMessages.editsectionsourceappendix){$editsections.find('a:not(.mw-editsection-visualeditor)').append($('<span>').addClass('ve-tabmessage-appendix').text(mw.msg(tabMessages.editsectionsourceappendix)));}if(isViewPage){$editsections.find('.mw-editsection-visualeditor').click(init.onEditSectionLinkClick);}},onEditTabClick:function(e){if((e.which&&e.which!==1)||e.shiftKey||e.altKey||e.ctrlKey||e.metaKey){return;}trackActivateStart({type:'page',mechanism:'click'});if(!active){if(history.pushState){history.replaceState({tag:
'visualeditor'},document.title,uri);history.pushState({tag:'visualeditor'},document.title,veEditUri);}uri=veEditUri;activateTarget();}e.preventDefault();},onEditSectionLinkClick:function(e){var targetPromise;if((e.which&&e.which!==1)||e.shiftKey||e.altKey||e.ctrlKey||e.metaKey){return;}trackActivateStart({type:'section',mechanism:'click'});if(history.pushState&&uri.query.veaction!=='edit'){history.replaceState({tag:'visualeditor'},document.title,uri);history.pushState({tag:'visualeditor'},document.title,this.href);}e.preventDefault();targetPromise=getTarget().then(function(target){target.saveEditSection($(e.target).closest('h1, h2, h3, h4, h5, h6').get(0));return target;});activateTarget(targetPromise);}};support.visualEditor=support.es5&&support.contentEditable&&support.svg&&(('vewhitelist'in uri.query)||!$.client.test(init.blacklist,null,true));enable=Number(mw.user.options.get('visualeditor-enable'));tempdisable=Number(mw.user.options.get('visualeditor-betatempdisable'));autodisable
=Number(mw.user.options.get('visualeditor-autodisable'));userPrefEnabled=(!(conf.disableForAnons&&mw.config.get('wgUserName')===null)&&enable&&!tempdisable&&!autodisable);init.isAvailable=(support.visualEditor&&$.inArray(mw.config.get('skin'),conf.skins)!==-1&&$.inArray(new mw.Title(mw.config.get('wgRelevantPageName')).getNamespaceId(),conf.namespaces)!==-1&&mw.config.get('wgTranslatePageTranslation')!=='translation'&&mw.config.get('wgPageContentModel')==='wikitext');mw.libs.ve=$.extend(mw.libs.ve||{},init);if(init.isAvailable&&userPrefEnabled){$('html').addClass('ve-available');}else{$('html').addClass('ve-not-available');}$(function(){var currentUri=new mw.Uri(location.href),isSection;if(init.isAvailable){if(isViewPage&&uri.query.veaction==='edit'){isSection=uri.query.vesection!==undefined;trackActivateStart({type:isSection?'section':'page',mechanism:'url'});activateTarget();}}if(userPrefEnabled){init.setupSkin();}if(currentUri.query.venotify){mw.hook('postEdit').fire({message:mw.msg
('postedit-confirmation-'+currentUri.query.venotify,mw.user)});delete currentUri.query.venotify;}});}());},{"css":[
".ve-activated #toc,.ve-activated #siteNotice,.ve-activated .mw-indicators, .ve-active #bodyContent \u003E :not( #siteSub ):not( #contentSub ):not( .ve-ui-mwTocWidget ),.ve-activated #t-print,.ve-activated #t-permalink,.ve-activated #p-coll-print_export,.ve-activated #t-cite,.ve-activating .ve-ui-surface,.ve-deactivating .ve-ui-surface{display:none}.ve-activated #bodyContent,.ve-activated #firstHeading,.ve-activated #siteSub,.ve-activated #contentSub{opacity:0.6;pointer-events:none}.ve-activated #firstHeading{cursor:default} .ve-activated #content{position:relative}.ve-init-mw-desktopArticleTarget-loading-overlay{position:absolute;left:0;right:0;z-index:1;margin-top:-0.5em}.ve-init-mw-desktopArticleTarget-progress{border:1px solid #347bff;background:#fff;height:0.75em;border-radius:2px;overflow:hidden;margin:0 25%}.ve-init-mw-desktopArticleTarget-progress-bar{width:0;height:0.75em;background:#347bff} .mw-editsection{white-space:nowrap; unicode-bidi:-moz-isolate;unicode-bidi:-webkit-isolate;unicode-bidi:isolate}.mw-editsection-divider{color:#555}.ve-tabmessage-appendix{font-size:0.7em;vertical-align:top;line-height:1.43em;padding-left:0.5em; background-image:none !important;display:inline !important}"
]},{"accesskey-ca-editsource":"e","accesskey-ca-ve-edit":"v","accesskey-save":"s","pipe-separator":"\u00a0| ","postedit-confirmation-created":"The page has been created.","postedit-confirmation-restored":"The page has been restored.","postedit-confirmation-saved":"Your edit was saved.","tooltip-ca-createsource":"Create the source code of this page","tooltip-ca-edit":"Edit this page","tooltip-ca-editsource":"Edit the source code of this page","tooltip-ca-ve-edit":"Edit this page","visualeditor-ca-createlocaldescriptionsource":"Add local description source","visualeditor-ca-createsource":"Create source","visualeditor-ca-editlocaldescriptionsource":"Edit local description source","visualeditor-ca-editsource":"Edit source","visualeditor-ca-editsource-section":"edit source"});mw.loader.implement("ext.visualEditor.track",function($,jQuery){(function(){var callbacks=$.Callbacks('memory'),queue=[];ve.track=function(topic,data){queue.push({topic:topic,timeStamp:ve.now(),data:data});callbacks.fire(queue);};ve.trackSubscribe=function(topic,callback){var seen=0;callbacks.add(function(queue){var event;for(;seen<queue.length;seen++){event=queue[seen];if(event.topic.indexOf(topic)===0){callback(event.topic,event.data,event.timeStamp);}}});};ve.trackSubscribeAll=function(callback){ve.trackSubscribe('',callback);};}());});mw.loader.implement("ext.visualEditor.ve",function($,jQuery){window.ve={};ve.now=(function(){var perf=window.performance,navStart=perf&&perf.timing&&perf.timing.navigationStart;return navStart&&typeof perf.now==='function'?function(){return navStart+perf.now();}:Date.now;}());});mw.loader.implement("jquery.byteLength",function($,jQuery){jQuery.byteLength=function(str){return str.replace(/[\u0080-\u07FF\uD800-\uDFFF]/g,'**').replace(/[\u0800-\uD7FF\uE000-\uFFFF]/g,'***').length;};;});mw.loader.implement("jquery.cookie",function($,jQuery){(function($,document,undefined){var pluses=/\+/g;function raw(s){return s;}function decoded(s){return unRfc2068(decodeURIComponent(s.replace(pluses,' ')));}function unRfc2068(value){if(value.indexOf('"')===0){value=value.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,'\\');}return value;}function fromJSON(value){return config.json?JSON.parse(value):value;}var config=$.cookie=function(key,value,options){if(value!==undefined){options=$.extend({},config.defaults,options);if(value===null){options.expires=-1;}if(typeof options.expires==='number'){var days=options.expires,t=options.expires=new Date();t.setDate(t.getDate()+days);}value=config.json?JSON.stringify(value):String(value);return(document.cookie=[encodeURIComponent(key),'=',config.raw?value:encodeURIComponent(value),options.expires?'; expires='+options.expires.toUTCString():'',options.path?'; path='+options.path:'',options.domain?'; domain='+options.domain:'',options.secure?
'; secure':''].join(''));}var decode=config.raw?raw:decoded;var cookies=document.cookie.split('; ');var result=key?null:{};for(var i=0,l=cookies.length;i<l;i++){var parts=cookies[i].split('=');var name=decode(parts.shift());var cookie=decode(parts.join('='));if(key&&key===name){result=fromJSON(cookie);break;}if(!key){result[name]=fromJSON(cookie);}}return result;};config.defaults={};$.removeCookie=function(key,options){if($.cookie(key)!==null){$.cookie(key,null,options);return true;}return false;};})(jQuery,document);});mw.loader.implement("jquery.tabIndex",function($,jQuery){(function($){$.fn.firstTabIndex=function(){var minTabIndex=null;$(this).find('[tabindex]').each(function(){var tabIndex=parseInt($(this).prop('tabindex'),10);if(tabIndex>0&&!isNaN(tabIndex)){if(minTabIndex===null){minTabIndex=tabIndex;}else if(tabIndex<minTabIndex){minTabIndex=tabIndex;}}});return minTabIndex;};$.fn.lastTabIndex=function(){var maxTabIndex=null;$(this).find('[tabindex]').each(function(){var tabIndex=parseInt($(this).prop('tabindex'),10);if(tabIndex>0&&!isNaN(tabIndex)){if(maxTabIndex===null){maxTabIndex=tabIndex;}else if(tabIndex>maxTabIndex){maxTabIndex=tabIndex;}}});return maxTabIndex;};}(jQuery));});mw.loader.implement("jquery.throttle-debounce",function($,jQuery){(function(window,undefined){'$:nomunge';var $=window.jQuery||window.Cowboy||(window.Cowboy={}),jq_throttle;$.throttle=jq_throttle=function(delay,no_trailing,callback,debounce_mode){var timeout_id,last_exec=0;if(typeof no_trailing!=='boolean'){debounce_mode=callback;callback=no_trailing;no_trailing=undefined;}function wrapper(){var that=this,elapsed=+new Date()-last_exec,args=arguments;function exec(){last_exec=+new Date();callback.apply(that,args);};function clear(){timeout_id=undefined;};if(debounce_mode&&!timeout_id){exec();}timeout_id&&clearTimeout(timeout_id);if(debounce_mode===undefined&&elapsed>delay){exec();}else if(no_trailing!==true){timeout_id=setTimeout(debounce_mode?clear:exec,debounce_mode===undefined?delay-elapsed:delay);}};if($.guid){wrapper.guid=callback.guid=callback.guid||$.guid++;}return wrapper;};$.debounce=function(delay,at_begin,callback){return callback===undefined?jq_throttle(delay,at_begin,false)
:jq_throttle(delay,callback,at_begin!==false);};})(this);});mw.loader.implement("jquery.tipsy",function($,jQuery){(function(mw,$){function maybeCall(thing,ctx){return(typeof thing=='function')?(thing.call(ctx)):thing;}function Tipsy(element,options){this.$element=$(element);this.options=options;this.enabled=!0;this.keyHandler=$.proxy(this.closeOnEsc,this);this.fixTitle();}Tipsy.prototype={show:function(){var title=this.getTitle();if(title&&this.enabled){var $tip=this.tip();$tip.find('.tipsy-inner')[this.options.html?'html':'text'](title);$tip[0].className='tipsy';if(this.options.className){$tip.addClass(maybeCall(this.options.className,this.$element[0]));}$tip.remove().css({top:0,left:0,visibility:'hidden',display:'block'}).attr('aria-hidden','true').appendTo(document.body);var pos=$.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight});var gravity=(typeof this.options.gravity=='function')?this.options.gravity.call(this.$element[0]):this.options.gravity;$tip.addClass('tipsy-'+gravity);if(
this.options.className){$tip.addClass(maybeCall(this.options.className,this.$element[0]));}var actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight;var tp;switch(gravity.charAt(0)){case'n':tp={top:pos.top+pos.height+this.options.offset,left:pos.left+pos.width/2-actualWidth/2};break;case's':tp={top:pos.top-actualHeight-this.options.offset,left:pos.left+pos.width/2-actualWidth/2};break;case'e':tp={top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth-this.options.offset};break;case'w':tp={top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width+this.options.offset};break;}if(gravity.length==2){if(gravity.charAt(1)=='w'){if(this.options.center){tp.left=pos.left+pos.width/2-15;}else{tp.left=pos.left;}}else{if(this.options.center){tp.left=pos.left+pos.width/2-actualWidth+15;}else{tp.left=pos.left+pos.width;}}}$tip.css(tp);$(document).on('keydown',this.keyHandler);if(this.options.fade){$tip.stop().css({opacity:0,display:'block',visibility:'visible'}).attr(
'aria-hidden','false').animate({opacity:this.options.opacity},100);}else{$tip.css({visibility:'visible',opacity:this.options.opacity}).attr('aria-hidden','false');}}},hide:function(){$(document).off('keydown',this.keyHandler);if(this.options.fade){this.tip().stop().fadeOut(100,function(){$(this).remove();});}else{this.tip().remove();}},fixTitle:function(){var $e=this.$element;if($e.attr('title')||typeof($e.attr('original-title'))!='string'){$e.attr('original-title',$e.attr('title')||'').removeAttr('title');}},getTitle:function(){var title,$e=this.$element,o=this.options;this.fixTitle();if(typeof o.title=='string'){title=$e.attr(o.title=='title'?'original-title':o.title);}else if(typeof o.title=='function'){title=o.title.call($e[0]);}title=(''+title).replace(/(^\s*|\s*$)/,"");return title||o.fallback;},tip:function(){if(!this.$tip){this.$tip=$('<div class="tipsy" role="tooltip"></div>').html('<div class="tipsy-arrow"></div><div class="tipsy-inner"></div>');}return this.$tip;},validate:
function(){if(!this.$element[0].parentNode){this.hide();this.$element=null;this.options=null;}},closeOnEsc:function(e){if(e.keyCode===27){this.hide();}},enable:function(){this.enabled=!0;},disable:function(){this.enabled=!1;},toggleEnabled:function(){this.enabled=!this.enabled;}};$.fn.tipsy=function(options){if(options===true){return this.data('tipsy');}else if(typeof options=='string'){var tipsy=this.data('tipsy');if(tipsy)tipsy[options]();return this;}options=$.extend({},$.fn.tipsy.defaults,options);function get(ele){var tipsy=$.data(ele,'tipsy');if(!tipsy){tipsy=new Tipsy(ele,$.fn.tipsy.elementOptions(ele,options));$.data(ele,'tipsy',tipsy);}return tipsy;}function enter(){var tipsy=get(this);tipsy.hoverState='in';if(options.delayIn==0){tipsy.show();}else{tipsy.fixTitle();setTimeout(function(){if(tipsy.hoverState=='in')tipsy.show();},options.delayIn);}};function leave(){var tipsy=get(this);tipsy.hoverState='out';if(options.delayOut==0){tipsy.hide();}else{setTimeout(function(){if
(tipsy.hoverState=='out')tipsy.hide();},options.delayOut);}};if(!options.live)this.each(function(){get(this);});if(options.trigger!='manual'){var eventIn=options.trigger=='hover'?'mouseenter focus':'focus',eventOut=options.trigger=='hover'?'mouseleave blur':'blur';if(options.live){mw.track('mw.deprecate','tipsy-live');mw.log.warn('Use of the "live" option of jquery.tipsy is deprecated.');$(this.context).on(eventIn,this.selector,enter).on(eventOut,this.selector,leave);}else{this.on(eventIn,enter).on(eventOut,leave);}}return this;};$.fn.tipsy.defaults={className:null,delayIn:0,delayOut:0,fade:!0,fallback:'',gravity:'n',center:!0,html:!1,live:!1,offset:0,opacity:1.0,title:'title',trigger:'hover'};$.fn.tipsy.elementOptions=function(ele,options){return $.metadata?$.extend({},options,$(ele).metadata()):options;};$.fn.tipsy.autoNS=function(){return $(this).offset().top>($(document).scrollTop()+$(window).height()/2)?'s':'n';};$.fn.tipsy.autoWE=function(){return $(this).offset().left>
($(document).scrollLeft()+$(window).width()/2)?'e':'w';};$.fn.tipsy.autoBounds=function(margin,prefer){return function(){var dir={ns:prefer[0],ew:(prefer.length>1?prefer[1]:false)},boundTop=$(document).scrollTop()+margin,boundLeft=$(document).scrollLeft()+margin,$this=$(this);if($this.offset().top<boundTop)dir.ns='n';if($this.offset().left<boundLeft)dir.ew='w';if($(window).width()+$(document).scrollLeft()-$this.offset().left<margin)dir.ew='e';if($(window).height()+$(document).scrollTop()-$this.offset().top<margin)dir.ns='s';return dir.ns+(dir.ew?dir.ew:'');}};}(mediaWiki,jQuery));},{"css":[
".tipsy{padding:5px;position:absolute;z-index:100000;cursor:default}.tipsy-inner{padding:5px 8px 4px 8px; background-color:#ffffff;border:solid 1px #a7d7f9;color:black;max-width:15em;border-radius:4px; }.tipsy-arrow{position:absolute;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALAgMAAADUwp+1AAAACVBMVEX5+fmn1/n///9s6BFKAAAAAXRSTlMAQObYZgAAACpJREFUCB1jZBD4wMiQMoeRcUU4I9uSaYxSE54xZjn8AtMgPkgcJA9UBwAeDw1Qrb3pVAAAAABJRU5ErkJggg==) no-repeat top left;background:url(//en.wikipedia.org/static/1.27.0-wmf.2/resources/src/jquery.tipsy/images/tipsy.png?6c317) no-repeat top left!ie;width:11px;height:6px} .tipsy-n .tipsy-arrow{top:0px;left:50%;margin-left:-5px} .tipsy-nw .tipsy-arrow{top:1px;left:10px} .tipsy-ne .tipsy-arrow{top:1px;right:10px} .tipsy-s .tipsy-arrow{bottom:0px;left:50%;margin-left:-5px;background-position:bottom left} .tipsy-sw .tipsy-arrow{bottom:0px;left:10px;background-position:bottom left} .tipsy-se .tipsy-arrow{bottom:0px;right:10px;background-position:bottom left} .tipsy-e .tipsy-arrow{top:50%;margin-top:-5px;right:1px;width:5px;height:11px;background-position:top right} .tipsy-w .tipsy-arrow{top:50%;margin-top:-5px;left:0px;width:6px;height:11px} .tipsy{font-size:0.8em}"
]});mw.loader.implement("mediawiki.Title",function($,jQuery){(function(mw,$){function Title(title,namespace){var parsed=parse(title,namespace);if(!parsed){throw new Error('Unable to parse title');}this.namespace=parsed.namespace;this.title=parsed.title;this.ext=parsed.ext;this.fragment=parsed.fragment;return this;}var NS_MAIN=0,NS_TALK=1,NS_SPECIAL=-1,NS_MEDIA=-2,NS_FILE=6,FILENAME_MAX_BYTES=240,TITLE_MAX_BYTES=255,getNsIdByName=function(ns){var id;if(typeof ns!=='string'){return false;}ns=ns.toLowerCase();id=mw.config.get('wgNamespaceIds')[ns];if(id===undefined){return false;}return id;},rUnderscoreTrim=/^_+|_+$/g,rSplit=/^(.+?)_*:_*(.*)$/,rInvalid=new RegExp('[^'+mw.config.get('wgLegalTitleChars')+']'+'|%[0-9A-Fa-f]{2}'+'|&[A-Za-z0-9\u0080-\uFFFF]+;'+'|&#[0-9]+;'+'|&#x[0-9A-Fa-f]+;'),rWhitespace=/[ _\u0009\u00A0\u1680\u180E\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\s]+/g,sanitationRules=[{pattern:/~{3}/g,replace:'',generalRule:!0},{pattern:rWhitespace,replace:' ',generalRule:!0},{
pattern:/[\u200E\u200F\u202A-\u202E]/g,replace:'',generalRule:!0},{pattern:/[\x00-\x1f\x7f]/g,replace:'',generalRule:!0},{pattern:/%([0-9A-Fa-f]{2})/g,replace:'% $1',generalRule:!0},{pattern:/&(([A-Za-z0-9\x80-\xff]+|#[0-9]+|#x[0-9A-Fa-f]+);)/g,replace:'& $1',generalRule:!0},{pattern:/[:\/#]/g,replace:'-',fileRule:!0},{pattern:/[\]\}>]/g,replace:')',generalRule:!0},{pattern:/[\[\{<]/g,replace:'(',generalRule:!0},{pattern:new RegExp(rInvalid.source,'g'),replace:'-',generalRule:!0},{pattern:/^(\.|\.\.|\.\/.*|\.\.\/.*|.*\/\.\/.*|.*\/\.\.\/.*|.*\/\.|.*\/\.\.)$/g,replace:'',generalRule:!0}],parse=function(title,defaultNamespace){var namespace,m,id,i,fragment,ext;namespace=defaultNamespace===undefined?NS_MAIN:defaultNamespace;title=title.replace(/[ _\s]+/g,'_').replace(rUnderscoreTrim,'');if(title!==''&&title[0]===':'){namespace=NS_MAIN;title=title.slice(1).replace(rUnderscoreTrim,'');}if(title===''){return false;}m=title.match(rSplit);if(m){id=getNsIdByName(m[1]);if(id!==
false){namespace=id;title=m[2];if(namespace===NS_TALK&&(m=title.match(rSplit))){if(getNsIdByName(m[1])!==false){return false;}}}}i=title.indexOf('#');if(i===-1){fragment=null;}else{fragment=title.slice(i+1).replace(/_/g,' ');title=title.slice(0,i).replace(rUnderscoreTrim,'');}if(title.match(rInvalid)){return false;}if(title.indexOf('.')!==-1&&(title==='.'||title==='..'||title.indexOf('./')===0||title.indexOf('../')===0||title.indexOf('/./')!==-1||title.indexOf('/../')!==-1||title.slice(-2)==='/.'||title.slice(-3)==='/..')){return false;}if(title.indexOf('~~~')!==-1){return false;}if(namespace!==NS_SPECIAL&&$.byteLength(title)>TITLE_MAX_BYTES){return false;}if(title===''&&namespace!==NS_MAIN){return false;}if(title[0]===':'){return false;}i=title.lastIndexOf('.');if(i===-1||title.length<=i+1){ext=null;}else{ext=title.slice(i+1);title=title.slice(0,i);}return{namespace:namespace,title:title,ext:ext,fragment:fragment};},text=function(s){if(s!==null&&s!==undefined){return s.replace(/_/g,
' ');}else{return'';}},sanitize=function(s,filter){var i,ruleLength,rule,m,filterLength,rules=sanitationRules;for(i=0,ruleLength=rules.length;i<ruleLength;++i){rule=rules[i];for(m=0,filterLength=filter.length;m<filterLength;++m){if(rule[filter[m]]){s=s.replace(rule.pattern,rule.replace);}}}return s;},trimToByteLength=function(s,length){var byteLength,chopOffChars,chopOffBytes;s=s.substr(0,length);while((byteLength=$.byteLength(s))>length){chopOffBytes=byteLength-length;chopOffChars=Math.max(1,Math.floor(chopOffBytes/4));s=s.substr(0,s.length-chopOffChars);}return s;},trimFileNameToByteLength=function(name,extension){return trimToByteLength(name,FILENAME_MAX_BYTES-extension.length-1)+'.'+extension;},createObject=Object.create||(function(){return function(o){function Title(){}if(o!==Object(o)){throw new Error('Cannot inherit from a non-object');}Title.prototype=o;return new Title();};}());Title.newFromText=function(title,namespace){var t,parsed=parse(title,namespace);if(!parsed){return null
;}t=createObject(Title.prototype);t.namespace=parsed.namespace;t.title=parsed.title;t.ext=parsed.ext;t.fragment=parsed.fragment;return t;};Title.newFromUserInput=function(title,defaultNamespace,options){var namespace,m,id,ext,parts;if(arguments.length<3&&$.type(defaultNamespace)==='object'){options=defaultNamespace;defaultNamespace=undefined;}options=$.extend({forUploading:!0},options);namespace=defaultNamespace===undefined?NS_MAIN:defaultNamespace;title=$.trim(title.replace(rWhitespace,' '));if(title!==''&&title[0]===':'){namespace=NS_MAIN;title=title.substr(1).replace(rUnderscoreTrim,'');}m=title.match(rSplit);if(m){id=getNsIdByName(m[1]);if(id!==false){namespace=id;title=m[2];}}if(namespace===NS_MEDIA||(options.forUploading&&(namespace===NS_FILE))){title=sanitize(title,['generalRule','fileRule']);parts=title.split('.');if(parts.length>1){ext=parts.pop();title=$.trim(parts.join('.'));title=trimFileNameToByteLength(title,ext);}else{title=$.trim(parts.join('.'));return null;}}else{
title=sanitize(title,['generalRule']);if(namespace!==NS_SPECIAL){title=trimToByteLength(title,TITLE_MAX_BYTES);}}title=title.replace(/^\:+/,'');return Title.newFromText(title,namespace);};Title.newFromFileName=function(uncleanName){return Title.newFromUserInput('File:'+uncleanName,{forUploading:!0});};Title.newFromImg=function(img){var matches,i,regex,src,decodedSrc,thumbPhpRegex=/thumb\.php/,regexes=[/\/[a-f0-9]\/[a-f0-9]{2}\/([^\s\/]+)\/[^\s\/]+-(?:\1|thumbnail)[^\s\/]*$/,/\/([^\s\/]+)\/[^\s\/]+-(?:\1|thumbnail)[^\s\/]*$/,/\/[a-f0-9]\/[a-f0-9]{2}\/([^\s\/]+)$/,/\/([^\s\/]+)$/],recount=regexes.length;src=img.jquery?img[0].src:img.src;matches=src.match(thumbPhpRegex);if(matches){return mw.Title.newFromText('File:'+mw.util.getParamValue('f',src));}decodedSrc=decodeURIComponent(src);for(i=0;i<recount;i++){regex=regexes[i];matches=decodedSrc.match(regex);if(matches&&matches[1]){return mw.Title.newFromText('File:'+matches[1]);}}return null;};Title.exists=function(title){var match,type=$.
type(title),obj=Title.exist.pages;if(type==='string'){match=obj[title];}else if(type==='object'&&title instanceof Title){match=obj[title.toString()];}else{throw new Error('mw.Title.exists: title must be a string or an instance of Title');}if(typeof match==='boolean'){return match;}return null;};Title.exist={pages:{},set:function(titles,state){titles=$.isArray(titles)?titles:[titles];state=state===undefined?true:!!state;var i,pages=this.pages,len=titles.length;for(i=0;i<len;i++){pages[titles[i]]=state;}return true;}};Title.normalizeExtension=function(extension){var lower=extension.toLowerCase(),squish={htm:'html',jpeg:'jpg',mpeg:'mpg',tiff:'tif',ogv:'ogg'};if(squish.hasOwnProperty(lower)){return squish[lower];}else if(/^[0-9a-z]+$/.test(lower)){return lower;}else{return'';}};Title.prototype={constructor:Title,getNamespaceId:function(){return this.namespace;},getNamespacePrefix:function(){return this.namespace===NS_MAIN?'':(mw.config.get('wgFormattedNamespaces')[this.namespace].replace(
/ /g,'_')+':');},getName:function(){if($.inArray(this.namespace,mw.config.get('wgCaseSensitiveNamespaces'))!==-1||!this.title.length){return this.title;}return this.title[0].toUpperCase()+this.title.slice(1);},getNameText:function(){return text(this.getName());},getExtension:function(){return this.ext;},getDotExtension:function(){return this.ext===null?'':'.'+this.ext;},getMain:function(){return this.getName()+this.getDotExtension();},getMainText:function(){return text(this.getMain());},getPrefixedDb:function(){return this.getNamespacePrefix()+this.getMain();},getPrefixedText:function(){return text(this.getPrefixedDb());},getRelativeText:function(namespace){if(this.getNamespaceId()===namespace){return this.getMainText();}else if(this.getNamespaceId()===NS_MAIN){return':'+this.getPrefixedText();}else{return this.getPrefixedText();}},getFragment:function(){return this.fragment;},getUrl:function(params){return mw.util.getUrl(this.toString(),params);},exists:function(){return Title.exists(
this);}};Title.prototype.toString=Title.prototype.getPrefixedDb;Title.prototype.toText=Title.prototype.getPrefixedText;mw.Title=Title;}(mediaWiki,jQuery));});mw.loader.implement("mediawiki.Uri",function($,jQuery){(function(mw,$){function cat(pre,val,post,raw){if(val===undefined||val===null||val===''){return'';}return pre+(raw?val:mw.Uri.encode(val))+post;}var parser={strict:mw.template.get('mediawiki.Uri','strict.regexp').render(),loose:mw.template.get('mediawiki.Uri','loose.regexp').render()},properties=['protocol','user','password','host','port','path','query','fragment'];mw.UriRelative=function(documentLocation){var getDefaultUri=(function(){var href,uri;return function(){var hrefCur=typeof documentLocation==='string'?documentLocation:documentLocation();if(href===hrefCur){return uri;}href=hrefCur;uri=new Uri(href);return uri;};}());function Uri(uri,options){var prop,defaultUri=getDefaultUri();options=typeof options==='object'?options:{strictMode:!!options};options=$.extend({strictMode:!1,overrideKeys:!1},options);if(uri!==undefined&&uri!==null&&uri!==''){if(typeof uri==='string'){this.parse(uri,options);}else if(typeof uri===
'object'){for(prop in uri){if(uri.hasOwnProperty(prop)){if($.isArray(uri[prop])||$.isPlainObject(uri[prop])){this[prop]=$.extend(true,{},uri[prop]);}else{this[prop]=uri[prop];}}}if(!this.query){this.query={};}}}else{return defaultUri.clone();}if(!this.protocol){this.protocol=defaultUri.protocol;}if(!this.host){this.host=defaultUri.host;if(!this.port){this.port=defaultUri.port;}}if(this.path&&this.path[0]!=='/'){throw new Error('Bad constructor arguments');}if(!(this.protocol&&this.host&&this.path)){throw new Error('Bad constructor arguments');}}Uri.encode=function(s){return encodeURIComponent(s).replace(/!/g,'%21').replace(/'/g,'%27').replace(/\(/g,'%28').replace(/\)/g,'%29').replace(/\*/g,'%2A').replace(/%20/g,'+');};Uri.decode=function(s){return decodeURIComponent(s.replace(/\+/g,'%20'));};Uri.prototype={parse:function(str,options){var q,matches,uri=this,hasOwn=Object.prototype.hasOwnProperty;matches=parser[options.strictMode?'strict':'loose'].exec(str);$.each(properties,function(i,
property){uri[property]=matches[i+1];});q={};if(uri.query){uri.query.replace(/(?:^|&)([^&=]*)(?:(=)([^&]*))?/g,function($0,$1,$2,$3){var k,v;if($1){k=Uri.decode($1);v=($2===''||$2===undefined)?null:Uri.decode($3);if(options.overrideKeys||!hasOwn.call(q,k)){q[k]=v;}else{if(typeof q[k]==='string'){q[k]=[q[k]];}if($.isArray(q[k])){q[k].push(v);}}}});}uri.query=q;},getUserInfo:function(){return cat('',this.user,cat(':',this.password,''));},getHostPort:function(){return this.host+cat(':',this.port,'');},getAuthority:function(){return cat('',this.getUserInfo(),'@')+this.getHostPort();},getQueryString:function(){var args=[];$.each(this.query,function(key,val){var k=Uri.encode(key),vals=$.isArray(val)?val:[val];$.each(vals,function(i,v){if(v===null){args.push(k);}else if(k==='title'){args.push(k+'='+mw.util.wikiUrlencode(v));}else{args.push(k+'='+Uri.encode(v));}});});return args.join('&');},getRelativePath:function(){return this.path+cat('?',this.getQueryString(),'',true)+cat('#',this.
fragment,'');},toString:function(){return this.protocol+'://'+this.getAuthority()+this.getRelativePath();},clone:function(){return new Uri(this);},extend:function(parameters){$.extend(this.query,parameters);return this;}};return Uri;};mw.Uri=mw.UriRelative(function(){return location.href;});}(mediaWiki,jQuery));},{},{},{"strict.regexp":"^\n(?:(?\u003Cprotocol\u003E[^:/?#]+):)?\n(?://(?:\n\t(?:\n\t\t(?\u003Cuser\u003E[^:@/?#]*)\n\t\t(?::(?\u003Cpassword\u003E[^:@/?#]*))?\n\t)?@)?\n\t(?\u003Chost\u003E[^:/?#]*)\n\t(?::(?\u003Cport\u003E\\d*))?\n)?\n(?\u003Cpath\u003E(?:[^?#/]*/)*[^?#]*)\n(?:\\?(?\u003Cquery\u003E[^#]*))?\n(?:\\#(?\u003Cfragment\u003E.*))?\n","loose.regexp":
"^\n(?:\n\t(?![^:@]+:[^:@/]*@)\n\t(?\u003Cprotocol\u003E[^:/?#.]+):\n)?\n(?://)?\n(?:(?:\n\t(?\u003Cuser\u003E[^:@/?#]*)\n\t(?::(?\u003Cpassword\u003E[^:@/?#]*))?\n)?@)?\n(?\u003Chost\u003E[^:/?#]*)\n(?::(?\u003Cport\u003E\\d*))?\n(\n\t(?:/\n\t\t(?:[^?#]\n\t\t\t(?![^?#/]*\\.[^?#/.]+(?:[?#]|$))\n\t\t)*/?\n\t)?\n\t[^?#/]*\n)\n(?:\\?(?\u003Cquery\u003E[^#]*))?\n(?:\\#(?\u003Cfragment\u003E.*))?\n"});mw.loader.implement("mediawiki.api",function($,jQuery){(function(mw,$){var defaultOptions={parameters:{action:'query',format:'json'},ajax:{url:mw.util.wikiScript('api'),timeout:30*1000,dataType:'json'}},promises={};promises[defaultOptions.ajax.url]={};$.each(mw.user.tokens.get(),function(key,value){promises[defaultOptions.ajax.url][key]=$.Deferred().resolve(value).promise({abort:function(){}});});mw.Api=function(options){options=options||{};if(options.ajax&&options.ajax.url!==undefined){options.ajax.url=String(options.ajax.url);}options.parameters=$.extend({},defaultOptions.parameters,options.parameters);options.ajax=$.extend({},defaultOptions.ajax,options.ajax);this.defaults=options;};mw.Api.prototype={get:function(parameters,ajaxOptions){ajaxOptions=ajaxOptions||{};ajaxOptions.type='GET';return this.ajax(parameters,ajaxOptions);},post:function(parameters,ajaxOptions){ajaxOptions=ajaxOptions||{};ajaxOptions.type='POST';return this.ajax(parameters,ajaxOptions);},preprocessParameters:
function(parameters){var key;for(key in parameters){if($.isArray(parameters[key])){parameters[key]=parameters[key].join('|');}if(parameters[key]===false||parameters[key]===undefined){delete parameters[key];}}},ajax:function(parameters,ajaxOptions){var token,apiDeferred=$.Deferred(),xhr,key,formData;parameters=$.extend({},this.defaults.parameters,parameters);ajaxOptions=$.extend({},this.defaults.ajax,ajaxOptions);if(parameters.token){token=parameters.token;delete parameters.token;}this.preprocessParameters(parameters);if(ajaxOptions.type==='POST'&&window.FormData&&ajaxOptions.contentType==='multipart/form-data'){formData=new FormData();for(key in parameters){formData.append(key,parameters[key]);}if(token){formData.append('token',token);}ajaxOptions.data=formData;ajaxOptions.processData=!1;ajaxOptions.contentType=!1;}else{ajaxOptions.data=$.param(parameters).replace(/\./g,'%2E');if(token){ajaxOptions.data+='&token='+encodeURIComponent(token);}if(ajaxOptions.contentType===
'multipart/form-data'){delete ajaxOptions.contentType;}}xhr=$.ajax(ajaxOptions).fail(function(xhr,textStatus,exception){apiDeferred.reject('http',{xhr:xhr,textStatus:textStatus,exception:exception});}).done(function(result,textStatus,jqXHR){if(result===undefined||result===null||result===''){apiDeferred.reject('ok-but-empty','OK response but empty result (check HTTP headers?)');}else if(result.error){var code=result.error.code===undefined?'unknown':result.error.code;apiDeferred.reject(code,result);}else{apiDeferred.resolve(result,jqXHR);}});return apiDeferred.promise({abort:xhr.abort}).fail(function(code,details){if(!(code==='http'&&details&&details.textStatus==='abort')){mw.log('mw.Api error: ',code,details);}});},postWithToken:function(tokenType,params,ajaxOptions){var api=this;return api.getToken(tokenType,params.assert).then(function(token){params.token=token;return api.post(params,ajaxOptions).then(null,function(code){if(code==='badtoken'){api.badToken(tokenType);params.token=
undefined;return api.getToken(tokenType,params.assert).then(function(token){params.token=token;return api.post(params,ajaxOptions);});}return this;});});},getToken:function(type,assert){var apiPromise,promiseGroup=promises[this.defaults.ajax.url],d=promiseGroup&&promiseGroup[type+'Token'];if(!d){apiPromise=this.get({action:'tokens',type:type,assert:assert});d=apiPromise.then(function(data){if(data.tokens&&data.tokens[type+'token']){return data.tokens[type+'token'];}return $.Deferred().reject('token-missing',data);},function(){delete promiseGroup[type+'Token'];return this;}).promise({abort:apiPromise.abort});if(!promiseGroup){promiseGroup=promises[this.defaults.ajax.url]={};}promiseGroup[type+'Token']=d;}return d;},badToken:function(type){var promiseGroup=promises[this.defaults.ajax.url];if(promiseGroup){delete promiseGroup[type+'Token'];}}};mw.Api.errors=['ok-but-empty','timeout','duplicate','duplicate-archive','noimageinfo','uploaddisabled','nomodule','mustbeposted','badaccess-groups'
,'missingresult','missingparam','invalid-file-key','copyuploaddisabled','mustbeloggedin','empty-file','file-too-large','filetype-missing','filetype-banned','filetype-banned-type','filename-tooshort','illegal-filename','verification-error','hookaborted','unknown-error','internal-error','overwrite','badtoken','fetchfileerror','fileexists-shared-forbidden','invalidtitle','notloggedin','stashfailed','stasherror','stashedfilenotfound','stashpathinvalid','stashfilestorage','stashzerolength','stashnotloggedin','stashwrongowner','stashnosuchfilekey'];mw.Api.warnings=['duplicate','exists'];}(mediaWiki,jQuery));});mw.loader.implement("mediawiki.cldr",function($,jQuery){(function(mw){'use strict';mw.cldr={getPluralForm:function(number,pluralRules){var i;for(i=0;i<pluralRules.length;i++){if(mw.libs.pluralRuleParser(pluralRules[i],number)){break;}}return i;}};}(mediaWiki));});mw.loader.implement("mediawiki.cookie",function($,jQuery){(function(mw,$){'use strict';mw.cookie={set:function(key,value,options){var config,defaultOptions,date;config=mw.config.get(['wgCookiePrefix','wgCookieDomain','wgCookiePath','wgCookieExpiration']);defaultOptions={prefix:config.wgCookiePrefix,domain:config.wgCookieDomain,path:config.wgCookiePath,secure:!1};if($.type(options)!=='object'){defaultOptions.expires=options;options=defaultOptions;}else{options=$.extend(defaultOptions,options);}if(options.expires===undefined&&config.wgCookieExpiration!==0){date=new Date();date.setTime(Number(date)+(config.wgCookieExpiration*1000));options.expires=date;}else if(typeof options.expires==='number'){date=new Date();date.setTime(Number(date)+(options.expires*1000));options.expires=date;}else if(options.expires===null){delete options.expires;}key=options.prefix+key;delete options.prefix;if(value!==null){value=String(value);}$.cookie(key,value,options);},get:function(key,prefix,defaultValue){
var result;if(prefix===undefined||prefix===null){prefix=mw.config.get('wgCookiePrefix');}if(arguments.length<3){defaultValue=null;}result=$.cookie(prefix+key);return result!==null?result:defaultValue;}};}(mediaWiki,jQuery));});mw.loader.implement("mediawiki.jqueryMsg",function($,jQuery){(function(mw,$){var oldParser,slice=Array.prototype.slice,parserDefaults={magic:{SITENAME:mw.config.get('wgSiteName')},allowedHtmlElements:[],allowedHtmlCommonAttributes:['id','class','style','lang','dir','title','role'],allowedHtmlAttributesByElement:{},messages:mw.messages,language:mw.language,format:'parse'};function appendWithoutParsing($parent,children){var i,len;if(!$.isArray(children)){children=[children];}for(i=0,len=children.length;i<len;i++){if(typeof children[i]!=='object'){children[i]=document.createTextNode(children[i]);}if(children[i]instanceof jQuery&&children[i].hasClass('mediaWiki_htmlEmitter')){children[i]=children[i].contents();}}return $parent.append(children);}function decodePrimaryHtmlEntities(encoded){return encoded.replace(/&#039;/g,'\'').replace(/&quot;/g,'"').replace(/&lt;/g,'<').replace(/&gt;/g,'>').replace(/&amp;/g,'&');}function textify(input){if(input instanceof jQuery){input=input.text();}return String
(input);}function getFailableParserFn(options){var parser=new mw.jqueryMsg.parser(options);return function(args){var fallback,key=args[0],argsArray=$.isArray(args[1])?args[1]:slice.call(args,1);try{return parser.parse(key,argsArray);}catch(e){fallback=parser.settings.messages.get(key);mw.log.warn('mediawiki.jqueryMsg: '+key+': '+e.message);return $('<span>').text(fallback);}};}mw.jqueryMsg={};mw.jqueryMsg.setParserDefaults=function(data){if(data.allowedHtmlElements){parserDefaults.allowedHtmlElements=data.allowedHtmlElements;}};mw.jqueryMsg.getMessageFunction=function(options){var failableParserFn=getFailableParserFn(options),format;if(options&&options.format!==undefined){format=options.format;}else{format=parserDefaults.format;}return function(){var failableResult=failableParserFn(arguments);if(format==='text'||format==='escaped'){return failableResult.text();}else{return failableResult.html();}};};mw.jqueryMsg.getPlugin=function(options){var failableParserFn=getFailableParserFn(
options);return function(){var $target=this.empty();appendWithoutParsing($target,failableParserFn(arguments));return $target;};};mw.jqueryMsg.parser=function(options){this.settings=$.extend({},parserDefaults,options);this.settings.onlyCurlyBraceTransform=(this.settings.format==='text'||this.settings.format==='escaped');this.emitter=new mw.jqueryMsg.htmlEmitter(this.settings.language,this.settings.magic);};mw.jqueryMsg.parser.prototype={astCache:{},parse:function(key,replacements){return this.emitter.emit(this.getAst(key),replacements);},getAst:function(key){var wikiText,cacheKey=[key,this.settings.onlyCurlyBraceTransform].join(':');if(this.astCache[cacheKey]===undefined){wikiText=this.settings.messages.get(key);if(typeof wikiText!=='string'){wikiText='\\['+key+'\\]';}this.astCache[cacheKey]=this.wikiTextToAst(wikiText);}return this.astCache[cacheKey];},wikiTextToAst:function(input){var pos,regularLiteral,regularLiteralWithoutBar,regularLiteralWithoutSpace,
regularLiteralWithSquareBrackets,doubleQuote,singleQuote,backslash,anyCharacter,asciiAlphabetLiteral,escapedOrLiteralWithoutSpace,escapedOrLiteralWithoutBar,escapedOrRegularLiteral,whitespace,dollar,digits,htmlDoubleQuoteAttributeValue,htmlSingleQuoteAttributeValue,htmlAttributeEquals,openHtmlStartTag,optionalForwardSlash,openHtmlEndTag,closeHtmlTag,openExtlink,closeExtlink,wikilinkContents,openWikilink,closeWikilink,templateName,pipe,colon,templateContents,openTemplate,closeTemplate,nonWhitespaceExpression,paramExpression,expression,curlyBraceTransformExpression,result,settings=this.settings,concat=Array.prototype.concat;pos=0;function choice(ps){return function(){var i,result;for(i=0;i<ps.length;i++){result=ps[i]();if(result!==null){return result;}}return null;};}function sequence(ps){var i,res,originalPos=pos,result=[];for(i=0;i<ps.length;i++){res=ps[i]();if(res===null){pos=originalPos;return null;}result.push(res);}return result;}function nOrMore(n,p){return function(){var
originalPos=pos,result=[],parsed=p();while(parsed!==null){result.push(parsed);parsed=p();}if(result.length<n){pos=originalPos;return null;}return result;};}function transform(p,fn){return function(){var result=p();return result===null?null:fn(result);};}function makeStringParser(s){var len=s.length;return function(){var result=null;if(input.substr(pos,len)===s){result=s;pos+=len;}return result;};}function makeRegexParser(regex){return function(){var matches=input.slice(pos).match(regex);if(matches===null){return null;}pos+=matches[0].length;return matches[0];};}regularLiteral=makeRegexParser(/^[^{}\[\]$<\\]/);regularLiteralWithoutBar=makeRegexParser(/^[^{}\[\]$\\|]/);regularLiteralWithoutSpace=makeRegexParser(/^[^{}\[\]$\s]/);regularLiteralWithSquareBrackets=makeRegexParser(/^[^{}$\\]/);backslash=makeStringParser('\\');doubleQuote=makeStringParser('"');singleQuote=makeStringParser('\'');anyCharacter=makeRegexParser(/^./);openHtmlStartTag=makeStringParser('<');optionalForwardSlash=
makeRegexParser(/^\/?/);openHtmlEndTag=makeStringParser('</');htmlAttributeEquals=makeRegexParser(/^\s*=\s*/);closeHtmlTag=makeRegexParser(/^\s*>/);function escapedLiteral(){var result=sequence([backslash,anyCharacter]);return result===null?null:result[1];}escapedOrLiteralWithoutSpace=choice([escapedLiteral,regularLiteralWithoutSpace]);escapedOrLiteralWithoutBar=choice([escapedLiteral,regularLiteralWithoutBar]);escapedOrRegularLiteral=choice([escapedLiteral,regularLiteral]);function literalWithoutSpace(){var result=nOrMore(1,escapedOrLiteralWithoutSpace)();return result===null?null:result.join('');}function literalWithoutBar(){var result=nOrMore(1,escapedOrLiteralWithoutBar)();return result===null?null:result.join('');}function literal(){var result=nOrMore(1,escapedOrRegularLiteral)();return result===null?null:result.join('');}function curlyBraceTransformExpressionLiteral(){var result=nOrMore(1,regularLiteralWithSquareBrackets)();return result===null?null:result.join('');}
asciiAlphabetLiteral=makeRegexParser(/[A-Za-z]+/);htmlDoubleQuoteAttributeValue=makeRegexParser(/^[^"]*/);htmlSingleQuoteAttributeValue=makeRegexParser(/^[^']*/);whitespace=makeRegexParser(/^\s+/);dollar=makeStringParser('$');digits=makeRegexParser(/^\d+/);function replacement(){var result=sequence([dollar,digits]);if(result===null){return null;}return['REPLACE',parseInt(result[1],10)-1];}openExtlink=makeStringParser('[');closeExtlink=makeStringParser(']');function extlink(){var result,parsedResult,target;result=null;parsedResult=sequence([openExtlink,nOrMore(1,nonWhitespaceExpression),whitespace,nOrMore(1,expression),closeExtlink]);if(parsedResult!==null){target=parsedResult[1].length===1?parsedResult[1][0]:['CONCAT'].concat(parsedResult[1]);result=['EXTLINK',target,['CONCAT'].concat(parsedResult[3])];}return result;}openWikilink=makeStringParser('[[');closeWikilink=makeStringParser(']]');pipe=makeStringParser('|');function template(){var result=sequence([openTemplate,templateContents
,closeTemplate]);return result===null?null:result[1];}function pipedWikilink(){var result=sequence([nOrMore(1,paramExpression),pipe,nOrMore(1,expression)]);return result===null?null:[['CONCAT'].concat(result[0]),['CONCAT'].concat(result[2])];}function unpipedWikilink(){var result=sequence([nOrMore(1,paramExpression)]);return result===null?null:[['CONCAT'].concat(result[0])];}wikilinkContents=choice([pipedWikilink,unpipedWikilink]);function wikilink(){var result,parsedResult,parsedLinkContents;result=null;parsedResult=sequence([openWikilink,wikilinkContents,closeWikilink]);if(parsedResult!==null){parsedLinkContents=parsedResult[1];result=['WIKILINK'].concat(parsedLinkContents);}return result;}function doubleQuotedHtmlAttributeValue(){var parsedResult=sequence([doubleQuote,htmlDoubleQuoteAttributeValue,doubleQuote]);return parsedResult===null?null:parsedResult[1];}function singleQuotedHtmlAttributeValue(){var parsedResult=sequence([singleQuote,htmlSingleQuoteAttributeValue,singleQuote]);
return parsedResult===null?null:parsedResult[1];}function htmlAttribute(){var parsedResult=sequence([whitespace,asciiAlphabetLiteral,htmlAttributeEquals,choice([doubleQuotedHtmlAttributeValue,singleQuotedHtmlAttributeValue])]);return parsedResult===null?null:[parsedResult[1],parsedResult[3]];}function isAllowedHtml(startTagName,endTagName,attributes){var i,len,attributeName;startTagName=startTagName.toLowerCase();endTagName=endTagName.toLowerCase();if(startTagName!==endTagName||$.inArray(startTagName,settings.allowedHtmlElements)===-1){return false;}for(i=0,len=attributes.length;i<len;i+=2){attributeName=attributes[i];if($.inArray(attributeName,settings.allowedHtmlCommonAttributes)===-1&&$.inArray(attributeName,settings.allowedHtmlAttributesByElement[startTagName]||[])===-1){return false;}}return true;}function htmlAttributes(){var parsedResult=nOrMore(0,htmlAttribute)();return concat.apply(['HTMLATTRIBUTES'],parsedResult);}function html(){var parsedOpenTagResult,parsedHtmlContents,
parsedCloseTagResult,wrappedAttributes,attributes,startTagName,endTagName,startOpenTagPos,startCloseTagPos,endOpenTagPos,endCloseTagPos,result=null;startOpenTagPos=pos;parsedOpenTagResult=sequence([openHtmlStartTag,asciiAlphabetLiteral,htmlAttributes,optionalForwardSlash,closeHtmlTag]);if(parsedOpenTagResult===null){return null;}endOpenTagPos=pos;startTagName=parsedOpenTagResult[1];parsedHtmlContents=nOrMore(0,expression)();startCloseTagPos=pos;parsedCloseTagResult=sequence([openHtmlEndTag,asciiAlphabetLiteral,closeHtmlTag]);if(parsedCloseTagResult===null){return['CONCAT',input.slice(startOpenTagPos,endOpenTagPos)].concat(parsedHtmlContents);}endCloseTagPos=pos;endTagName=parsedCloseTagResult[1];wrappedAttributes=parsedOpenTagResult[2];attributes=wrappedAttributes.slice(1);if(isAllowedHtml(startTagName,endTagName,attributes)){result=['HTMLELEMENT',startTagName,wrappedAttributes].concat(parsedHtmlContents);}else{result=['CONCAT',input.slice(startOpenTagPos,endOpenTagPos)].concat(
parsedHtmlContents,input.slice(startCloseTagPos,endCloseTagPos));}return result;}templateName=transform(makeRegexParser(/^[ !"$&'()*,.\/0-9;=?@A-Z\^_`a-z~\x80-\xFF+\-]+/),function(result){return result.toString();});function templateParam(){var expr,result;result=sequence([pipe,nOrMore(0,paramExpression)]);if(result===null){return null;}expr=result[1];return expr.length>1?['CONCAT'].concat(expr):expr[0];}function templateWithReplacement(){var result=sequence([templateName,colon,replacement]);return result===null?null:[result[0],result[2]];}function templateWithOutReplacement(){var result=sequence([templateName,colon,paramExpression]);return result===null?null:[result[0],result[2]];}function templateWithOutFirstParameter(){var result=sequence([templateName,colon]);return result===null?null:[result[0],''];}colon=makeStringParser(':');templateContents=choice([function(){var res=sequence([choice([templateWithReplacement,templateWithOutReplacement,templateWithOutFirstParameter]),nOrMore(0,
templateParam)]);return res===null?null:res[0].concat(res[1]);},function(){var res=sequence([templateName,nOrMore(0,templateParam)]);if(res===null){return null;}return[res[0]].concat(res[1]);}]);openTemplate=makeStringParser('{{');closeTemplate=makeStringParser('}}');nonWhitespaceExpression=choice([template,wikilink,extlink,replacement,literalWithoutSpace]);paramExpression=choice([template,wikilink,extlink,replacement,literalWithoutBar]);expression=choice([template,wikilink,extlink,replacement,html,literal]);curlyBraceTransformExpression=choice([template,replacement,curlyBraceTransformExpressionLiteral]);function start(rootExpression){var result=nOrMore(0,rootExpression)();if(result===null){return null;}return['CONCAT'].concat(result);}result=start(this.settings.onlyCurlyBraceTransform?curlyBraceTransformExpression:expression);if(result===null||pos!==input.length){throw new Error('Parse error at position '+pos.toString()+' in input: '+input);}return result;}};mw.jqueryMsg.htmlEmitter=
function(language,magic){this.language=language;var jmsg=this;$.each(magic,function(key,val){jmsg[key.toLowerCase()]=function(){return val;};});this.emit=function(node,replacements){var ret,subnodes,operation,jmsg=this;switch(typeof node){case'string':case'number':ret=node;break;case'object':subnodes=$.map(node.slice(1),function(n){return jmsg.emit(n,replacements);});operation=node[0].toLowerCase();if(typeof jmsg[operation]==='function'){ret=jmsg[operation](subnodes,replacements);}else{throw new Error('Unknown operation "'+operation+'"');}break;case'undefined':ret='';break;default:throw new Error('Unexpected type in AST: '+typeof node);}return ret;};};mw.jqueryMsg.htmlEmitter.prototype={concat:function(nodes){var $span=$('<span>').addClass('mediaWiki_htmlEmitter');$.each(nodes,function(i,node){appendWithoutParsing($span,node);});return $span;},replace:function(nodes,replacements){var index=parseInt(nodes[0],10);if(index<replacements.length){return replacements[index];}else{return'$'+(
index+1);}},wikilink:function(nodes){var page,anchor,url,$el;page=textify(nodes[0]);url=mw.util.getUrl(page);if(nodes.length===1){anchor=page;}else{anchor=nodes[1];}$el=$('<a>').attr({title:page,href:url});return appendWithoutParsing($el,anchor);},htmlattributes:function(nodes){var i,len,mapping={};for(i=0,len=nodes.length;i<len;i+=2){mapping[nodes[i]]=decodePrimaryHtmlEntities(nodes[i+1]);}return mapping;},htmlelement:function(nodes){var tagName,attributes,contents,$element;tagName=nodes.shift();attributes=nodes.shift();contents=nodes;$element=$(document.createElement(tagName)).attr(attributes);return appendWithoutParsing($element,contents);},extlink:function(nodes){var $el,arg=nodes[0],contents=nodes[1];if(arg instanceof jQuery&&!arg.hasClass('mediaWiki_htmlEmitter')){$el=arg;}else{$el=$('<a>');if(typeof arg==='function'){$el.attr('href','#').click(function(e){e.preventDefault();}).click(arg);}else{$el.attr('href',textify(arg));}}return appendWithoutParsing($el,contents);},plural:
function(nodes){var forms,firstChild,firstChildText,explicitPluralFormNumber,formIndex,form,count,explicitPluralForms={};count=parseFloat(this.language.convertNumber(nodes[0],true));forms=nodes.slice(1);for(formIndex=0;formIndex<forms.length;formIndex++){form=forms[formIndex];if(form instanceof jQuery&&form.hasClass('mediaWiki_htmlEmitter')){firstChild=form.contents().get(0);if(firstChild&&firstChild.nodeType===Node.TEXT_NODE){firstChildText=firstChild.textContent;if(/^\d+=/.test(firstChildText)){explicitPluralFormNumber=parseInt(firstChildText.split(/=/)[0],10);firstChild.textContent=firstChildText.slice(firstChildText.indexOf('=')+1);explicitPluralForms[explicitPluralFormNumber]=form;forms[formIndex]=undefined;}}}else if(/^\d+=/.test(form)){explicitPluralFormNumber=parseInt(form.split(/=/)[0],10);explicitPluralForms[explicitPluralFormNumber]=form.slice(form.indexOf('=')+1);forms[formIndex]=undefined;}}forms=$.map(forms,function(form){return form;});return this.language.convertPlural(
count,forms,explicitPluralForms);},gender:function(nodes){var gender,maybeUser=nodes[0],forms=nodes.slice(1);if(maybeUser===''){maybeUser=mw.user;}if(maybeUser&&maybeUser.options instanceof mw.Map){gender=maybeUser.options.get('gender');}else{gender=maybeUser;}return this.language.gender(gender,forms);},grammar:function(nodes){var form=nodes[0],word=nodes[1];return word&&form&&this.language.convertGrammar(word,form);},'int':function(nodes){var msg=nodes[0];return mw.jqueryMsg.getMessageFunction()(msg.charAt(0).toLowerCase()+msg.slice(1));},formatnum:function(nodes){var isInteger=(nodes[1]&&nodes[1]==='R')?true:!1,number=nodes[0];return this.language.convertNumber(number,isInteger);}};mw.log.deprecate(window,'gM',mw.jqueryMsg.getMessageFunction(),'Use mw.message( ... ).parse() instead.');$.fn.msg=mw.jqueryMsg.getPlugin();oldParser=mw.Message.prototype.parser;mw.Message.prototype.parser=function(){var messageFunction;if(this.format==='plain'||!/\{\{|[\[<>&]/.test(this.map.get(this.key
))){return oldParser.apply(this);}messageFunction=mw.jqueryMsg.getMessageFunction({messages:this.map,format:this.format});return messageFunction(this.key,this.parameters);};}(mediaWiki,jQuery));mw.jqueryMsg.setParserDefaults({"allowedHtmlElements":["b","bdi","del","i","ins","u","font","big","small","sub","sup","h1","h2","h3","h4","h5","h6","cite","code","em","s","strike","strong","tt","var","div","center","blockquote","ol","ul","dl","table","caption","pre","ruby","rb","rp","rt","rtc","p","span","abbr","dfn","kbd","samp","data","time","mark","li","dt","dd"]});});mw.loader.implement("mediawiki.language",function($,jQuery){(function(mw,$){$.extend(mw.language,{procPLURAL:function(template){if(template.title&&template.parameters&&mw.language.convertPlural){if(template.parameters.length===0){return'';}var count=mw.language.convertNumber(template.title,true);return mw.language.convertPlural(parseInt(count,10),template.parameters);}if(template.parameters[0]){return template.parameters[0];}return'';},convertPlural:function(count,forms,explicitPluralForms){var pluralRules,pluralFormIndex=0;if(explicitPluralForms&&explicitPluralForms[count]){return explicitPluralForms[count];}if(!forms||forms.length===0){return'';}pluralRules=mw.language.getData(mw.config.get('wgUserLanguage'),'pluralRules');if(!pluralRules){return(count===1)?forms[0]:forms[1];}pluralFormIndex=mw.cldr.getPluralForm(count,pluralRules);pluralFormIndex=Math.min(pluralFormIndex,forms.length-1);return forms[pluralFormIndex];},preConvertPlural:function(forms,count){while(forms.length<count){
forms.push(forms[forms.length-1]);}return forms;},gender:function(gender,forms){if(!forms||forms.length===0){return'';}forms=mw.language.preConvertPlural(forms,2);if(gender==='male'){return forms[0];}if(gender==='female'){return forms[1];}return(forms.length===3)?forms[2]:forms[0];},convertGrammar:function(word,form){var grammarForms=mw.language.getData(mw.config.get('wgUserLanguage'),'grammarForms');if(grammarForms&&grammarForms[form]){return grammarForms[form][word]||word;}return word;},listToText:function(list){var text='',i=0;for(;i<list.length;i++){text+=list[i];if(list.length-2===i){text+=mw.msg('and')+mw.msg('word-separator');}else if(list.length-1!==i){text+=mw.msg('comma-separator');}}return text;},setSpecialCharacters:function(data){this.specialCharacters=data;}});}(mediaWiki,jQuery));(function(mw,$){function replicate(str,num){if(num<=0||!str){return'';}var buf=[];while(num--){buf.push(str);}return buf.join('');}function pad(text,size,ch,end){if(!ch){ch='0';}var out=String(
text),padStr=replicate(ch,Math.ceil((size-out.length)/ch.length));return end?out+padStr:padStr+out;}function commafyNumber(value,pattern,options){options=options||{group:',',decimal:'.'};if(isNaN(value)){return value;}var padLength,patternDigits,index,whole,off,remainder,patternParts=pattern.split('.'),maxPlaces=(patternParts[1]||[]).length,valueParts=String(Math.abs(value)).split('.'),fractional=valueParts[1]||'',groupSize=0,groupSize2=0,pieces=[];if(patternParts[1]){padLength=(patternParts[1]&&patternParts[1].lastIndexOf('0')+1);if(padLength>fractional.length){valueParts[1]=pad(fractional,padLength,'0',true);}if(maxPlaces<fractional.length){valueParts[1]=fractional.slice(0,maxPlaces);}}else{if(valueParts[1]){valueParts.pop();}}patternDigits=patternParts[0].replace(',','');padLength=patternDigits.indexOf('0');if(padLength!==-1){padLength=patternDigits.length-padLength;if(padLength>valueParts[0].length){valueParts[0]=pad(valueParts[0],padLength);}if(patternDigits.indexOf('#')===-1){
valueParts[0]=valueParts[0].slice(valueParts[0].length-padLength);}}index=patternParts[0].lastIndexOf(',');if(index!==-1){groupSize=patternParts[0].length-index-1;remainder=patternParts[0].slice(0,index);index=remainder.lastIndexOf(',');if(index!==-1){groupSize2=remainder.length-index-1;}}for(whole=valueParts[0];whole;){off=groupSize?whole.length-groupSize:0;pieces.push((off>0)?whole.slice(off):whole);whole=(off>0)?whole.slice(0,off):'';if(groupSize2){groupSize=groupSize2;groupSize2=null;}}valueParts[0]=pieces.reverse().join(options.group);return valueParts.join(options.decimal);}$.extend(mw.language,{convertNumber:function(num,integer){var i,tmp,transformTable,numberString,convertedNumber,pattern;pattern=mw.language.getData(mw.config.get('wgUserLanguage'),'digitGroupingPattern')||'#,##0.###';transformTable=mw.language.getDigitTransformTable();if(!transformTable){return num;}if(integer){if(parseInt(num,10)===num){return num;}tmp=[];for(i in transformTable){tmp[transformTable[i]]=i;}
transformTable=tmp;numberString=String(num);}else{if(!mw.config.get('wgTranslateNumerals')){transformTable=[];}numberString=mw.language.commafy(num,pattern);}convertedNumber='';for(i=0;i<numberString.length;i++){if(transformTable[numberString[i]]){convertedNumber+=transformTable[numberString[i]];}else{convertedNumber+=numberString[i];}}return integer?parseInt(convertedNumber,10):convertedNumber;},getDigitTransformTable:function(){return mw.language.getData(mw.config.get('wgUserLanguage'),'digitTransformTable')||[];},getSeparatorTransformTable:function(){return mw.language.getData(mw.config.get('wgUserLanguage'),'separatorTransformTable')||[];},commafy:function(value,pattern){var numberPattern,transformTable=mw.language.getSeparatorTransformTable(),group=transformTable[',']||',',numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/,decimal=transformTable['.']||'.',patternList=pattern.split(';'),positivePattern=patternList[0];pattern=patternList[(value<0)?1:0]||('-'+positivePattern);numberPattern=
positivePattern.match(numberPatternRE);if(!numberPattern){throw new Error('unable to find a number expression in pattern: '+pattern);}return pattern.replace(numberPatternRE,commafyNumber(value,numberPattern[0],{decimal:decimal,group:group}));}});}(mediaWiki,jQuery));(function(mw,$){$.extend(mw.language,{getFallbackLanguages:function(){return mw.language.getData(mw.config.get('wgUserLanguage'),'fallbackLanguages')||[];},getFallbackLanguageChain:function(){return[mw.config.get('wgUserLanguage')].concat(mw.language.getFallbackLanguages());}});}(mediaWiki,jQuery));},{},{"and":" and","comma-separator":", ","word-separator":" "});mw.loader.implement("mediawiki.template",function($,jQuery){(function(mw,$){var compiledTemplates={},compilers={};mw.template={registerCompiler:function(name,compiler){if(!compiler.compile){throw new Error('Compiler must implement compile method.');}compilers[name]=compiler;},getCompilerName:function(templateName){var templateParts=templateName.split('.');if(templateParts.length<2){throw new Error('Unable to identify compiler. Template name must have a suffix.');}return templateParts[templateParts.length-1];},getCompiler:function(compilerName){var compiler=compilers[compilerName];if(!compiler){throw new Error('Unknown compiler '+compilerName);}return compiler;},add:function(moduleName,templateName,templateBody){var compiledTemplate,compilerName=this.getCompilerName(templateName);if(!compiledTemplates[moduleName]){compiledTemplates[moduleName]={};}compiledTemplate=this.compile(templateBody,compilerName);compiledTemplates[moduleName][templateName]=compiledTemplate;return compiledTemplate
;},get:function(moduleName,templateName){var moduleTemplates,compiledTemplate;if(!compiledTemplates[moduleName]||!compiledTemplates[moduleName][templateName]){moduleTemplates=mw.templates.get(moduleName);if(!moduleTemplates||!moduleTemplates[templateName]){throw new Error('Template '+templateName+' not found in module '+moduleName);}compiledTemplate=this.add(moduleName,templateName,moduleTemplates[templateName]);}else{compiledTemplate=compiledTemplates[moduleName][templateName];}return compiledTemplate;},compile:function(templateBody,compilerName){return this.getCompiler(compilerName).compile(templateBody);}};mw.template.registerCompiler('html',{compile:function(src){return{render:function(){return $($.parseHTML($.trim(src)));}};}});}(mediaWiki,jQuery));});mw.loader.implement("mediawiki.user",function($,jQuery){(function(mw,$){var i,deferreds={},byteToHex=[];function getUserInfo(info){var api;if(!deferreds[info]){deferreds.rights=$.Deferred();deferreds.groups=$.Deferred();api=new mw.Api();api.get({action:'query',meta:'userinfo',uiprop:'rights|groups'}).always(function(data){var rights,groups;if(data.query&&data.query.userinfo){rights=data.query.userinfo.rights;groups=data.query.userinfo.groups;}deferreds.rights.resolve(rights||[]);deferreds.groups.resolve(groups||[]);});}return deferreds[info].promise();}for(i=0;i<256;i++){byteToHex[i]=(i+256).toString(16).slice(1);}$.extend(mw.user,{generateRandomSessionId:function(){var rnds,i,r,hexRnds=new Array(8),crypto=window.crypto||window.msCrypto;if(crypto&&crypto.getRandomValues){rnds=new Uint8Array(8);crypto.getRandomValues(rnds);}else{rnds=new Array(8);for(i=0;i<8;i++){if((i&3)===0){r=Math.random()*0x100000000;}rnds[i]=r>>>((i&3)<<3)&255;}}for(i=0;i<8;i++){hexRnds[i]=byteToHex[rnds[i]];}
return hexRnds.join('');},getId:function(){return mw.config.get('wgUserId',0);},getName:function(){return mw.config.get('wgUserName');},getRegistration:function(){var registration=mw.config.get('wgUserRegistration');if(mw.user.isAnon()){return false;}if(registration===null){return null;}return new Date(registration);},isAnon:function(){return mw.user.getName()===null;},sessionId:function(){var sessionId=mw.cookie.get('mwuser-sessionId');if(sessionId===null){sessionId=mw.user.generateRandomSessionId();mw.cookie.set('mwuser-sessionId',sessionId,{expires:null});}return sessionId;},id:function(){return mw.user.getName()||mw.user.sessionId();},bucket:function(key,options){var cookie,parts,version,bucket,range,k,rand,total;options=$.extend({buckets:{},version:0,expires:30},options||{});cookie=mw.cookie.get('mwuser-bucket:'+key);if(typeof cookie==='string'&&cookie.length>2&&cookie.indexOf(':')!==-1){parts=cookie.split(':');if(parts.length>1&&Number(parts[0])===options.version){version=Number(
parts[0]);bucket=String(parts[1]);}}if(bucket===undefined){if(!$.isPlainObject(options.buckets)){throw new Error('Invalid bucket. Object expected for options.buckets.');}version=Number(options.version);range=0;for(k in options.buckets){range+=options.buckets[k];}rand=Math.random()*range;total=0;for(k in options.buckets){bucket=k;total+=options.buckets[k];if(total>=rand){break;}}mw.cookie.set('mwuser-bucket:'+key,version+':'+bucket,{expires:Number(options.expires)*86400});}return bucket;},getGroups:function(callback){return getUserInfo('groups').done(callback);},getRights:function(callback){return getUserInfo('rights').done(callback);}});}(mediaWiki,jQuery));});mw.loader.implement("mediawiki.language.data",function($,jQuery){mw.language.setData("en",{"digitTransformTable":null,"separatorTransformTable":null,"grammarForms":[],"pluralRules":["i = 1 and v = 0 @integer 1"],"digitGroupingPattern":null,"fallbackLanguages":[]});});mw.loader.implement("mediawiki.language.init",function($,jQuery){(function(mw){mw.language={data:{},getData:function(langCode,dataKey){var langData=mw.language.data;langCode=langCode.toLowerCase();if(langData&&langData[langCode]instanceof mw.Map){return langData[langCode].get(dataKey);}return undefined;},setData:function(langCode,dataKey,value){var langData=mw.language.data;langCode=langCode.toLowerCase();if(!(langData[langCode]instanceof mw.Map)){langData[langCode]=new mw.Map();}langData[langCode].set(dataKey,value);}};}(mediaWiki));});mw.loader.implement("mediawiki.libs.pluralruleparser",function($,jQuery){(function(mw){function pluralRuleParser(rule,number){'use strict';rule=rule.split('@')[0].replace(/^\s*/,'').replace(/\s*$/,'');if(!rule.length){return true;}var pos=0,operand,expression,relation,result,whitespace=makeRegexParser(/^\s+/),value=makeRegexParser(/^\d+/),_n_=makeStringParser('n'),_i_=makeStringParser('i'),_f_=makeStringParser('f'),_t_=makeStringParser('t'),_v_=makeStringParser('v'),_w_=makeStringParser('w'),_is_=makeStringParser('is'),_isnot_=makeStringParser('is not'),_isnot_sign_=makeStringParser('!='),_equal_=makeStringParser('='),_mod_=makeStringParser('mod'),_percent_=makeStringParser('%'),_not_=makeStringParser('not'),_in_=makeStringParser('in'),_within_=makeStringParser('within'),_range_=makeStringParser('..'),_comma_=makeStringParser(','),_or_=makeStringParser('or'),_and_=makeStringParser('and');function debug(){}debug('pluralRuleParser',rule,number);function choice(parserSyntax){return function
(){var i,result;for(i=0;i<parserSyntax.length;i++){result=parserSyntax[i]();if(result!==null){return result;}}return null;};}function sequence(parserSyntax){var i,parserRes,originalPos=pos,result=[];for(i=0;i<parserSyntax.length;i++){parserRes=parserSyntax[i]();if(parserRes===null){pos=originalPos;return null;}result.push(parserRes);}return result;}function nOrMore(n,p){return function(){var originalPos=pos,result=[],parsed=p();while(parsed!==null){result.push(parsed);parsed=p();}if(result.length<n){pos=originalPos;return null;}return result;};}function makeStringParser(s){var len=s.length;return function(){var result=null;if(rule.substr(pos,len)===s){result=s;pos+=len;}return result;};}function makeRegexParser(regex){return function(){var matches=rule.substr(pos).match(regex);if(matches===null){return null;}pos+=matches[0].length;return matches[0];};}function i(){var result=_i_();if(result===null){debug(' -- failed i',parseInt(number,10));return result;}result=parseInt(number,10);
debug(' -- passed i ',result);return result;}function n(){var result=_n_();if(result===null){debug(' -- failed n ',number);return result;}result=parseFloat(number,10);debug(' -- passed n ',result);return result;}function f(){var result=_f_();if(result===null){debug(' -- failed f ',number);return result;}result=(number+'.').split('.')[1]||0;debug(' -- passed f ',result);return result;}function t(){var result=_t_();if(result===null){debug(' -- failed t ',number);return result;}result=(number+'.').split('.')[1].replace(/0$/,'')||0;debug(' -- passed t ',result);return result;}function v(){var result=_v_();if(result===null){debug(' -- failed v ',number);return result;}result=(number+'.').split('.')[1].length||0;debug(' -- passed v ',result);return result;}function w(){var result=_w_();if(result===null){debug(' -- failed w ',number);return result;}result=(number+'.').split('.')[1].replace(/0$/,'').length||0;debug(' -- passed w ',result);return result;}operand=choice([n,i,f,t,v,w]);expression
=choice([mod,operand]);function mod(){var result=sequence([operand,whitespace,choice([_mod_,_percent_]),whitespace,value]);if(result===null){debug(' -- failed mod');return null;}debug(' -- passed '+parseInt(result[0],10)+' '+result[2]+' '+parseInt(result[4],10));return parseInt(result[0],10)%parseInt(result[4],10);}function not(){var result=sequence([whitespace,_not_]);if(result===null){debug(' -- failed not');return null;}return result[1];}function is(){var result=sequence([expression,whitespace,choice([_is_]),whitespace,value]);if(result!==null){debug(' -- passed is : '+result[0]+' == '+parseInt(result[4],10));return result[0]===parseInt(result[4],10);}debug(' -- failed is');return null;}function isnot(){var result=sequence([expression,whitespace,choice([_isnot_,_isnot_sign_]),whitespace,value]);if(result!==null){debug(' -- passed isnot: '+result[0]+' != '+parseInt(result[4],10));return result[0]!==parseInt(result[4],10);}debug(' -- failed isnot');return null;}function not_in(){var i
,range_list,result=sequence([expression,whitespace,_isnot_sign_,whitespace,rangeList]);if(result!==null){debug(' -- passed not_in: '+result[0]+' != '+result[4]);range_list=result[4];for(i=0;i<range_list.length;i++){if(parseInt(range_list[i],10)===parseInt(result[0],10)){return false;}}return true;}debug(' -- failed not_in');return null;}function rangeList(){var result=sequence([choice([range,value]),nOrMore(0,rangeTail)]),resultList=[];if(result!==null){resultList=resultList.concat(result[0]);if(result[1][0]){resultList=resultList.concat(result[1][0]);}return resultList;}debug(' -- failed rangeList');return null;}function rangeTail(){var result=sequence([_comma_,rangeList]);if(result!==null){return result[1];}debug(' -- failed rangeTail');return null;}function range(){var i,array,left,right,result=sequence([value,_range_,value]);if(result!==null){debug(' -- passed range');array=[];left=parseInt(result[0],10);right=parseInt(result[2],10);for(i=left;i<=right;i++){array.push(i);}return array
;}debug(' -- failed range');return null;}function _in(){var result,range_list,i;result=sequence([expression,nOrMore(0,not),whitespace,choice([_in_,_equal_]),whitespace,rangeList]);if(result!==null){debug(' -- passed _in:'+result);range_list=result[5];for(i=0;i<range_list.length;i++){if(parseInt(range_list[i],10)===parseInt(result[0],10)){return(result[1][0]!=='not');}}return(result[1][0]==='not');}debug(' -- failed _in ');return null;}function within(){var range_list,result;result=sequence([expression,nOrMore(0,not),whitespace,_within_,whitespace,rangeList]);if(result!==null){debug(' -- passed within');range_list=result[5];if((result[0]>=parseInt(range_list[0],10))&&(result[0]<parseInt(range_list[range_list.length-1],10))){return(result[1][0]!=='not');}return(result[1][0]==='not');}debug(' -- failed within ');return null;}relation=choice([is,not_in,isnot,_in,within]);function and(){var i,result=sequence([relation,nOrMore(0,andTail)]);if(result){if(!result[0]){return false;}for(i=0;i<
result[1].length;i++){if(!result[1][i]){return false;}}return true;}debug(' -- failed and');return null;}function andTail(){var result=sequence([whitespace,_and_,whitespace,relation]);if(result!==null){debug(' -- passed andTail'+result);return result[3];}debug(' -- failed andTail');return null;}function orTail(){var result=sequence([whitespace,_or_,whitespace,and]);if(result!==null){debug(' -- passed orTail: '+result[3]);return result[3];}debug(' -- failed orTail');return null;}function condition(){var i,result=sequence([and,nOrMore(0,orTail)]);if(result){for(i=0;i<result[1].length;i++){if(result[1][i]){return true;}}return result[0];}return false;}result=condition();if(result===null){throw new Error('Parse error at position '+pos.toString()+' for rule: '+rule);}if(pos!==rule.length){debug('Warning: Rule not parsed completely. Parser stopped at '+rule.substr(0,pos)+' for rule: '+rule);}return result;}mw.libs.pluralRuleParser=pluralRuleParser;})(mediaWiki);});mw.loader.implement("mediawiki.page.startup",function($,jQuery){(function(mw,$){document.documentElement.className=document.documentElement.className.replace(/(^|\s)client-nojs(\s|$)/,'$1client-js$2');mw.page={};$(function(){mw.util.init();mw.hook('wikipage.content').fire($('#mw-content-text'));});}(mediaWiki,jQuery));});mw.loader.implement("mediawiki.special.changeslist",function($,jQuery){},{"css":[".mw-changeslist-line-watched .mw-title{font-weight:bold} .mw-changeslist .mw-tag-marker,.mw-changeslist .mw-title{unicode-bidi:embed}"]});mw.loader.implement("mediawiki.template.regexp",function($,jQuery){mediaWiki.template.registerCompiler('regexp',{compile:function(src){return{render:function(){return new RegExp(src.replace(/\s+/g,'').replace(/\?<\w+?>/g,''));}};}});});mw.loader.implement("mmv.head",function($,jQuery){(function(mw){mw.mmv={isBrowserSupported:function(){var ns={'svg':'http://www.w3.org/2000/svg'};return!!document.createElementNS&&!!document.createElementNS(ns.svg,'svg').createSVGRect;}};}(mediaWiki));(function(mw,$){var $document=$(document),start;if(!mw.mmv.isBrowserSupported()){return;}try{if(mw.config.get('wgMediaViewerOnClick')!==true||mw.user.isAnon()&&window.localStorage&&localStorage.getItem('wgMediaViewerOnClick')===false){return;}}catch(e){mw.log('Could not check value of wgMediaViewerOnClick in localStorage');}$document.on('click.mmv-head','a.image',function(e){if((e.button!==0&&e.which!==1)||e.altKey||e.ctrlKey||e.shiftKey||e.metaKey||e.replayed){return;}start=$.now();$document.ready(function(){mw.loader.using(['mmv.bootstrap.autostart'],function(){mw.mmv.bootstrap.whenThumbsReady().then(function(){mw.mmv.durationLogger.stop('early-click-to-replay-click',start).record('early-click-to-replay-click');$(e.target).trigger({type
:'click',which:1,replayed:!0});});});});e.preventDefault();});}(mediaWiki,jQuery));});mw.loader.implement("skins.vector.js",function($,jQuery){(function($){var rtl=$('html').attr('dir')==='rtl';$.fn.collapsibleTabs=function(options){if(!this.length){return this;}var settings=$.extend({},$.collapsibleTabs.defaults,options);this.each(function(){var $el=$(this);$.collapsibleTabs.instances=$.collapsibleTabs.instances.add($el);$el.data('collapsibleTabsSettings',settings);$el.children(settings.collapsible).each(function(){$.collapsibleTabs.addData($(this));});});if(!$.collapsibleTabs.boundEvent){$(window).on('resize',$.debounce(500,function(){$.collapsibleTabs.handleResize();}));$.collapsibleTabs.boundEvent=!0;}$.collapsibleTabs.handleResize();return this;};$.collapsibleTabs={instances:$([]),boundEvent:null,defaults:{expandedContainer:'#p-views ul',collapsedContainer:'#p-cactions ul',collapsible:'li.collapsible',shifting:!1,expandCondition:function(eleWidth){return $.collapsibleTabs.calculateTabDistance()>=eleWidth+1;},collapseCondition:function(){return $.
collapsibleTabs.calculateTabDistance()<0;}},addData:function($collapsible){var settings=$collapsible.parent().data('collapsibleTabsSettings');if(settings){$collapsible.data('collapsibleTabsSettings',{expandedContainer:settings.expandedContainer,collapsedContainer:settings.collapsedContainer,expandedWidth:$collapsible.width(),prevElement:$collapsible.prev()});}},getSettings:function($collapsible){var settings=$collapsible.data('collapsibleTabsSettings');if(!settings){$.collapsibleTabs.addData($collapsible);settings=$collapsible.data('collapsibleTabsSettings');}return settings;},handleResize:function(){$.collapsibleTabs.instances.each(function(){var $el=$(this),data=$.collapsibleTabs.getSettings($el);if(data.shifting){return;}if($el.children(data.collapsible).length>0&&data.collapseCondition()){$el.trigger('beforeTabCollapse');$.collapsibleTabs.moveToCollapsed($el.children(data.collapsible+':last'));}if($(data.collapsedContainer+' '+data.collapsible).length>0&&data.expandCondition($.
collapsibleTabs.getSettings($(data.collapsedContainer).children(data.collapsible+':first')).expandedWidth)){$el.trigger('beforeTabExpand');$.collapsibleTabs.moveToExpanded(data.collapsedContainer+' '+data.collapsible+':first');}});},moveToCollapsed:function(ele){var outerData,expContainerSettings,target,$moving=$(ele);outerData=$.collapsibleTabs.getSettings($moving);if(!outerData){return;}expContainerSettings=$.collapsibleTabs.getSettings($(outerData.expandedContainer));if(!expContainerSettings){return;}expContainerSettings.shifting=!0;target=outerData.collapsedContainer;$moving.css('position','relative').css((rtl?'left':'right'),0).animate({width:'1px'},'normal',function(){var data,expContainerSettings;$(this).hide();$('<span class="placeholder" style="display: none;"></span>').insertAfter(this);$(this).detach().prependTo(target).data('collapsibleTabsSettings',outerData);$(this).attr('style','display: list-item;');data=$.collapsibleTabs.getSettings($(ele));if(data){
expContainerSettings=$.collapsibleTabs.getSettings($(data.expandedContainer));if(expContainerSettings){expContainerSettings.shifting=!1;$.collapsibleTabs.handleResize();}}});},moveToExpanded:function(ele){var data,expContainerSettings,$target,expandedWidth,$moving=$(ele);data=$.collapsibleTabs.getSettings($moving);if(!data){return;}expContainerSettings=$.collapsibleTabs.getSettings($(data.expandedContainer));if(!expContainerSettings){return;}expContainerSettings.shifting=!0;$target=$(data.expandedContainer).find('span.placeholder:first');expandedWidth=data.expandedWidth;$moving.css('position','relative').css((rtl?'right':'left'),0).css('width','1px');$target.replaceWith($moving.detach().css('width','1px').data('collapsibleTabsSettings',data).animate({width:expandedWidth+'px'},'normal',function(){$(this).attr('style','display: block;');var data,expContainerSettings;data=$.collapsibleTabs.getSettings($(this));if(data){expContainerSettings=$.collapsibleTabs.getSettings($(data.
expandedContainer));if(expContainerSettings){expContainerSettings.shifting=!1;$.collapsibleTabs.handleResize();}}}));},calculateTabDistance:function(){var $leftTab,$rightTab,leftEnd,rightStart;if(!rtl){$leftTab=$('#left-navigation');$rightTab=$('#right-navigation');}else{$leftTab=$('#right-navigation');$rightTab=$('#left-navigation');}leftEnd=$leftTab.offset().left+$leftTab.width();rightStart=$rightTab.offset().left;return rightStart-leftEnd;}};}(jQuery));jQuery(function($){$('#searchInput').attr('tabindex',$(document).lastTabIndex()+1);$('div.vectorMenu').each(function(){var $el=$(this);$el.find('> h3 > a').parent().attr('tabindex','0').on('click keypress',function(e){if(e.type==='click'||e.which===13){$el.toggleClass('menuForceShow');e.preventDefault();}}).focus(function(){$el.find('> a').addClass('vectorMenuFocus');}).blur(function(){$el.find('> a').removeClass('vectorMenuFocus');}).find('> a:first').attr('tabindex','-1');});var $cactions=$('#p-cactions'),$tabContainer=$(
'#p-views ul'),originalDropdownWidth=$cactions.width();$tabContainer.bind('beforeTabCollapse',function(){if($cactions.hasClass('emptyPortlet')){$cactions.removeClass('emptyPortlet').find('h3').css('width','1px').animate({width:originalDropdownWidth},'normal');}}).bind('beforeTabExpand',function(){if($cactions.find('li').length===1){$cactions.find('h3').animate({width:'1px'},'normal',function(){$(this).attr('style','').parent().addClass('emptyPortlet');});}}).collapsibleTabs({expandCondition:function(eleWidth){var distance=$.collapsibleTabs.calculateTabDistance();if(distance>=eleWidth+1){return true;}else{if($cactions.find('li').length===1){return distance>=eleWidth+1-originalDropdownWidth;}else{return false;}}},collapseCondition:function(){if($.collapsibleTabs.calculateTabDistance()<0){if($cactions.hasClass('emptyPortlet')){return $tabContainer.children('li.collapsible:last').width()>originalDropdownWidth;}else{return true;}}else{return false;}}});});});mw.loader.implement("user.defaults",function($,jQuery){mw.user.options.set({"globaluserpage":!0,"visualeditor-enable":1,"visualeditor-betatempdisable":0,"visualeditor-enable-experimental":0,"visualeditor-enable-language":0,"visualeditor-hidebetawelcome":0,"visualeditor-autodisable":0,"echo-subscriptions-web-gather":!0,"math":"png","uls-preferences":"","echo-subscriptions-web-cx":!0,"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"editfont":"default","editondblclick":0,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"minordefault":0,"newpageshidepatrolled":0,"nickname":"","norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"rcdays":7,"rclimit":50,"rows":25,"showhiddencats":!1,"shownumberswatching":1,"showtoolbar":1,"skin":"vector",
"stubthreshold":0,"thumbsize":4,"underline":2,"uselivepreview":0,"usenewrc":0,"watchcreations":1,"watchdefault":0,"watchdeletion":0,"watchlistdays":3,"watchlisthideanons":0,"watchlisthidebots":0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"watchrollback":0,"wllimit":250,"useeditwarning":1,"prefershttps":1,"flaggedrevssimpleui":1,"flaggedrevsstable":0,"flaggedrevseditdiffs":!0,"flaggedrevsviewdiffs":!1,"usebetatoolbar":1,"usebetatoolbar-cgd":1,"wikilove-enabled":1,"echo-subscriptions-web-page-review":!0,"echo-subscriptions-email-page-review":!1,"ep_showtoplink":!1,"ep_bulkdelorgs":!1,"ep_bulkdelcourses":!0,"ep_showdyk":!0,"echo-subscriptions-web-education-program":!0,"echo-subscriptions-email-education-program":!1,"echo-show-alert":!0,"echo-email-frequency":0,"echo-email-format":"html","echo-subscriptions-email-system":!0,"echo-subscriptions-web-system":!0,"echo-subscriptions-email-user-rights"
:!0,"echo-subscriptions-web-user-rights":!0,"echo-subscriptions-email-other":!1,"echo-subscriptions-web-other":!0,"echo-subscriptions-email-edit-user-talk":!1,"echo-subscriptions-web-edit-user-talk":!0,"echo-subscriptions-email-reverted":!1,"echo-subscriptions-web-reverted":!0,"echo-subscriptions-email-article-linked":!1,"echo-subscriptions-web-article-linked":!1,"echo-subscriptions-email-mention":!1,"echo-subscriptions-web-mention":!0,"echo-subscriptions-email-emailuser":!1,"echo-subscriptions-web-emailuser":!1,"echo-subscriptions-web-edit-thank":!0,"echo-subscriptions-email-edit-thank":!1,"echo-subscriptions-web-flow-discussion":!0,"echo-subscriptions-email-flow-discussion":!1,"flow-topiclist-sortby":"updated","flow-editor":"visualeditor","flow-side-rail-state":"expanded","gettingstarted-task-toolbar-show-intro":!0,"multimediaviewer-enable":!0,"language":"en","variant-gan":"gan","variant-iu":"iu","variant-kk":"kk","variant-ku":"ku",
"variant-shi":"shi","variant-sr":"sr","variant-tg":"tg","variant-uz":"uz","variant-zh":"zh","searchNs0":!0,"searchNs1":!1,"searchNs2":!1,"searchNs3":!1,"searchNs4":!1,"searchNs5":!1,"searchNs6":!1,"searchNs7":!1,"searchNs8":!1,"searchNs9":!1,"searchNs10":!1,"searchNs11":!1,"searchNs12":!1,"searchNs13":!1,"searchNs14":!1,"searchNs15":!1,"searchNs100":!1,"searchNs101":!1,"searchNs108":!1,"searchNs109":!1,"searchNs118":!1,"searchNs119":!1,"searchNs446":!1,"searchNs447":!1,"searchNs710":!1,"searchNs711":!1,"searchNs828":!1,"searchNs829":!1,"searchNs2300":!1,"searchNs2301":!1,"searchNs2302":!1,"searchNs2303":!1,"gadget-confirmationRollback-mobile":1,"gadget-teahouse":1,"gadget-ReferenceTooltips":1,"gadget-formWizard":1,"gadget-geonotice":1,"gadget-WatchlistBase":1,"gadget-WatchlistGreenIndicators":1,"gadget-WatchlistGreenIndicatorsMono":1,"gadget-DRN-wizard":1,"gadget-charinsert":1,
"gadget-refToolbar":1,"gadget-switcher":1,"gadget-featured-articles-links":1});});